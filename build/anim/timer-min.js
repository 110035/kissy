/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jul 16 19:54
*/
KISSY.add("anim/timer/easing",function(){function j(a){return a}function k(a,h,g,b){var d=3*a-3*g+1,e=3*g-6*a,f=3*a,j=3*h-3*b+1,k=3*b-6*h,l=3*h;return function(a){a:{for(var g=a,b,h,p=0;8>p;p++){h=((d*g+e)*g+f)*g-a;if(n(h)<c){a=g;break a}b=(3*d*g+2*e)*g+f;if(n(b)<c)break;g-=h/b}b=1;p=0;for(g=a;b>p;){h=((d*g+e)*g+f)*g-a;if(n(h)<c)break;0<h?b=g:p=g;g=(b+p)/2}a=g}return((j*a+k)*a+l)*a}}var i=Math.PI,f=Math.pow,l=Math.sin,d=parseFloat,e=/^cubic-bezier\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/i,b={swing:function(a){return-Math.cos(a*
i)/2+0.5},easeNone:j,linear:j,easeIn:function(a){return a*a},ease:k(0.25,0.1,0.25,1),"ease-in":k(0.42,0,1,1),"ease-out":k(0,0,0.58,1),"ease-in-out":k(0.42,0,0.58,1),"ease-out-in":k(0,0.42,1,0.58),toFn:function(a){var c;return(c=a.match(e))?k(d(c[1]),d(c[2]),d(c[3]),d(c[4])):b[a]||j},easeOut:function(a){return(2-a)*a},easeBoth:function(a){return 1>(a*=2)?0.5*a*a:0.5*(1- --a*(a-2))},easeInStrong:function(a){return a*a*a*a},easeOutStrong:function(a){return 1- --a*a*a*a},easeBothStrong:function(a){return 1>
(a*=2)?0.5*a*a*a*a:0.5*(2-(a-=2)*a*a*a)},elasticIn:function(a){return 0===a||1===a?a:-(f(2,10*(a-=1))*l((a-0.075)*2*i/0.3))},elasticOut:function(a){return 0===a||1===a?a:f(2,-10*a)*l((a-0.075)*2*i/0.3)+1},elasticBoth:function(a){return 0===a||2===(a*=2)?a:1>a?-0.5*f(2,10*(a-=1))*l((a-0.1125)*2*i/0.45):0.5*f(2,-10*(a-=1))*l((a-0.1125)*2*i/0.45)+1},backIn:function(a){1===a&&(a-=0.001);return a*a*(2.70158*a-1.70158)},backOut:function(a){return(a-=1)*a*(2.70158*a+1.70158)+1},backBoth:function(a){var c,
g=(c=2.5949095)+1;return 1>(a*=2)?0.5*a*a*(g*a-c):0.5*((a-=2)*a*(g*a+c)+2)},bounceIn:function(a){return 1-b.bounceOut(1-a)},bounceOut:function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375},bounceBoth:function(a){return 0.5>a?0.5*b.bounceIn(2*a):0.5*b.bounceOut(2*a-1)+0.5}},c=1.0E-6,n=Math.abs;return b});
KISSY.add("anim/timer/manager",function(j,k){var i=j.stamp,f=j.Env.host,l=f.requestAnimationFrame,d=f.cancelAnimationFrame;if(!l)for(var e=["ms","moz","webkit","o"],b=0;b<e.length&&!l;++b)l=f[e[b]+"RequestAnimationFrame"],d=f[e[b]+"CancelAnimationFrame"]||f[e[b]+"CancelRequestAnimationFrame"];if(!l||j.UA.chrome)l=function(c){return setTimeout(c,15)},d=function(c){clearTimeout(c)};return{runnings:{},timer:null,start:function(c){var b=i(c);this.runnings[b]||(this.runnings[b]=c,this.startTimer())},stop:function(c){this.notRun(c)},
notRun:function(c){delete this.runnings[i(c)];j.isEmptyObject(this.runnings)&&this.stopTimer()},pause:function(c){this.notRun(c)},resume:function(c){this.start(c)},startTimer:function(){var c=this;c.timer||(c.timer=l(function a(){c.runFrames()?c.stopTimer():c.timer=l(a)}))},stopTimer:function(){var c=this.timer;c&&(d(c),this.timer=0)},runFrames:function(){var c,b,a=this.runnings;for(c in a)a[c].frame(),b=0;return b===k}}});
KISSY.add("anim/timer/fx",function(j,k,i){function f(d){j.mix(this,d);this.pos=0;this.unit=this.unit||""}function l(d,e){return(!d.style||null==d.style[e])&&null!=k.attr(d,e,i,1)?1:0}f.prototype={isBasicFx:1,constructor:f,load:function(d){j.mix(this,d);this.pos=0;this.unit=this.unit||""},frame:function(d){this.pos=d;this.update();this.finished=this.finished||1==d},interpolate:function(d,e,b){return"number"===typeof d&&"number"===typeof e?(d+(e-d)*b).toFixed(5):i},update:function(){var d=this.prop,
e=this.anim.node,b=this.to,c=this.interpolate(this.from,b,this.pos);c===i?this.finished||(this.finished=1,k.css(e,d,b)):(c+=this.unit,l(e,d)?k.attr(e,d,c,1):k.css(e,d,c))},cur:function(){var d=this.prop,e=this.anim.node;if(l(e,d))return k.attr(e,d,i,1);var b,d=k.css(e,d);return isNaN(b=parseFloat(d))?!d||"auto"===d?0:d:b}};f.Factories={};f.getPos=function(d,e){var b=j.now(),c=e.duration,b=b-d.startTime-e.delay;return 0>=b?0:b>=c?1:e.easing(b/c)};f.getFx=function(d){return new (f.Factories[d.prop]||
f)(d)};return f},{requires:["dom"]});KISSY.add("anim/timer/short-hand",function(){return{background:[],border:["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth"],borderBottom:["borderBottomWidth"],borderLeft:["borderLeftWidth"],borderTop:["borderTopWidth"],borderRight:["borderRightWidth"],font:["fontSize","fontWeight"],margin:["marginBottom","marginLeft","marginRight","marginTop"],padding:["paddingBottom","paddingLeft","paddingRight","paddingTop"]}});
KISSY.add("anim/timer/color",function(j,k,i,f){function l(g){var g=g+"",b;if(b=g.match(n))return[parseInt(b[1]),parseInt(b[2]),parseInt(b[3])];if(b=g.match(a))return[parseInt(b[1]),parseInt(b[2]),parseInt(b[3]),parseInt(b[4])];if(b=g.match(h)){for(g=1;g<b.length;g++)2>b[g].length&&(b[g]+=b[g]);return[parseInt(b[1],e),parseInt(b[2],e),parseInt(b[3],e)]}return c[g=g.toLowerCase()]?c[g]:[255,255,255]}function d(){d.superclass.constructor.apply(this,arguments)}var e=16,b=Math.floor,c={black:[0,0,0],silver:[192,
192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255]},n=/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,a=/^rgba\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+),\s*([0-9]+)\)$/i,h=/^#?([0-9A-F]{1,2})([0-9A-F]{1,2})([0-9A-F]{1,2})$/i;f.background.push("backgroundColor");f.borderColor=["borderBottomColor","borderLeftColor",
"borderRightColor","borderTopColor"];f.border.push("borderBottomColor","borderLeftColor","borderRightColor","borderTopColor");f.borderBottom.push("borderBottomColor");f.borderLeft.push("borderLeftColor");f.borderRight.push("borderRightColor");f.borderTop.push("borderTopColor");j.extend(d,i,{load:function(){d.superclass.load.apply(this,arguments);this.from&&(this.from=l(this.from));this.to&&(this.to=l(this.to))},interpolate:function(a,c,h){var e=d.superclass.interpolate;return 3==a.length&&3==c.length?
"rgb("+[b(e(a[0],c[0],h)),b(e(a[1],c[1],h)),b(e(a[2],c[2],h))].join(", ")+")":4==a.length||4==c.length?"rgba("+[b(e(a[0],c[0],h)),b(e(a[1],c[1],h)),b(e(a[2],c[2],h)),b(e(a[3]||1,c[3]||1,h))].join(", ")+")":j.log("anim/color unknown value : "+a)}});j.each("backgroundColor,borderBottomColor,borderLeftColor,borderRightColor,borderTopColor,color,outlineColor".split(","),function(a){i.Factories[a]=d});return d},{requires:["dom","./fx","./short-hand"]});
KISSY.add("anim/timer/transform",function(j,k,i){function f(b){b=b.substring(7,b.length-1).split(/,/);return b=j.map(b,function(b){return parseFloat(b)})}function l(b){var b=f(b),c,d,a,h=b[0],g=b[1],e=b[2],m=b[3];h*m-g*e?(c=Math.sqrt(h*h+g*g),h/=c,g/=c,a=h*e+g*m,e-=h*a,m-=g*a,d=Math.sqrt(e*e+m*m),a/=d,h*(m/d)<g*(e/d)&&(h=-h,g=-g,a=-a,c=-c)):c=d=a=0;return{translateX:+b[4],translateY:+b[5],rotate:Math.atan2(g,h),skewX:Math.atan(a),scaleX:c,scaleY:d}}function d(){return{translateX:0,translateY:0,rotate:0,
skewX:0,scaleX:1,scaleY:1}}function e(){e.superclass.constructor.apply(this,arguments)}j.extend(e,i,{load:function(){e.superclass.load.apply(this,arguments);var b=this.from;this.from=this.from&&"none"!=this.from?l(this.from):d();var c;if(this.to){c=this.anim.node;var f;k.css(c,"transform",this.to);f=k.css(c,"transform");k.css(c,"transform",b);c=l(f)}else c=d();this.to=c},interpolate:function(b,c,d){var a=e.superclass.interpolate,h={};h.translateX=a(b.translateX,c.translateX,d);h.translateY=a(b.translateY,
c.translateY,d);h.rotate=a(b.rotate,c.rotate,d);h.skewX=a(b.skewX,c.skewX,d);h.scaleX=a(b.scaleX,c.scaleX,d);h.scaleY=a(b.scaleY,c.scaleY,d);return j.substitute("translate({translateX}px,{translateY}px) rotate({rotate}rad) skewX({skewX}rad) scale({scaleX},{scaleY})",h)}});return i.Factories.transform=e},{requires:["dom","./fx"]});
KISSY.add("anim/timer",function(j,k,i,f,l,d,e,b){function c(){var a;c.superclass.constructor.apply(this,arguments);j.each(a=this.to,function(b,c){var d=n(c);c!=d&&(a[d]=a[c],delete a[c])})}var n=k._camelCase,a=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i;j.extend(c,f,{prepareFx:function(){var c=this.node,d=this._propsData;j.each(d,function(a){a.duration*=1E3;a.delay*=1E3;"string"==typeof a.easing&&(a.easing=l.toFn(a.easing))});j.each(b,function(a,b){var e,f=d[b],m;f&&!f.fx&&(m=f.value,e={},j.each(a,function(a){e[a]=
k.css(c,a)}),k.css(c,b,m),j.each(e,function(a,b){b in d||(d[b]=j.merge(f,{value:k.css(c,b)}));k.css(c,b,a)}),delete d[b])});var f,m,i,q,o,n,s,r;for(f in d)if(m=d[f],m.fx)m.fx.prop=f;else{i=m.value;n={prop:f,anim:this,propData:m};s=e.getFx(n);q=i;o=s.cur();i+="";r="";if(i=i.match(a)){q=parseFloat(i[2]);if((r=i[3])&&"px"!==r&&o){var t=0,u=q;do++u,k.css(c,f,u+r),t=s.cur();while(0==t);o*=u/t;k.css(c,f,o+r)}i[1]&&(q=("-="===i[1]?-1:1)*q+o)}n.from=o;n.to=q;n.unit=r;s.load(n);m.fx=s}},frame:function(){var a,
b=1,c,d,f,i,j=this._propsData;for(a in j)if(i=j[a],d=i.fx,!d.finished&&(f=e.getPos(this,i),0!=f)){d.pos=f;if(d.isBasicFx){if(d.from==d.to){d.finished=d.finished||1==f;continue}c=0;if(i.frame&&(c=i.frame(this,d),!this.isRunning()))return;!1!==c&&d.frame(d.finished||f)}else if(d.finished=d.finished||1==f,d.frame(this,d),!this.isRunning())return;b&=d.finished}(!1===this.fire("step")||b)&&this.stop(b)},doStop:function(a){var b,c,e,f=this._propsData;d.stop(this);if(a)for(b in f)if(e=f[b],(a=e.fx)&&!a.finished)a.pos=
1,a.isBasicFx?(c=0,e.frame&&(c=e.frame(this,a)),!1!==c&&a.frame(1)):a.frame(this,a),a.finished=1},doStart:function(){d.start(this)}});c.Easing=l;c.Fx=e;return c},{requires:"dom,event,./base,./timer/easing,./timer/manager,./timer/fx,./timer/short-hand,./timer/color,./timer/transform".split(",")});
