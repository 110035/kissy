/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: May 10 16:22
*/
KISSY.add("component/base",function(e,f,c,b,g,a,d,i){e.mix(f,{Controller:c,Render:b,Container:g,DelegateChildren:a,DecorateChild:i,DecorateChildren:d});return f},{requires:"./base/impl,./base/controller,./base/render,./base/container,./base/delegate-children,./base/decorate-children,./base/decorate-child".split(",")});
KISSY.add("component/base/box-render",function(e,f,c){function b(){}var g=e.all,a=e.UA,d=e.Env.host.document;b.ATTRS={id:{},el:{},elCls:{sync:0,setter:function(a){"string"==typeof a&&(a=a.split(/\s+/));return a}},elStyle:{sync:0},width:{sync:0},height:{sync:0},elAttrs:{sync:0},elBefore:{sync:0},render:{},visible:{sync:0},startTpl:{valueFn:function(){return'<div id="ks-component{{id}}" class="{{getCssClassWithState ""}} {{#if visible}}{{getCssClassWithState "shown"}} {{else}}{{getCssClassWithState "hidden"}} {{/if}}{{#if elCls}}{{#each elCls}} {{.}} {{/each}}{{/if}} "{{#if elAttrs}}{{#each elAttrs}} {{xkey}}="{{.}}" {{/each}} {{/if}}style="{{#if elStyle}}{{#each elStyle}} {{xkey}}:{{.}}; {{/each}}{{/if}} {{#if width}}width:{{width}};{{/if}}{{#if height}}height:{{height}};{{/if}}">'}},
endTpl:{value:"</div>"},contentTpl:{value:"{{{content}}}"},renderData:{},childrenElSelectors:{value:{contentEl:function(a){return a}}}};b.prototype={__createDom:function(){var a=this,b;if(b=a.get("srcNode")){if((b=g(b))&&!b[0].id)b[0].id="ks-component"+e.guid()}else b=a.get("startTpl")+a.get("contentTpl")+a.get("endTpl"),b=(new c(b,{commands:{getCssClassWithState:function(b,d){return a.getCssClassWithState(d.params[0])}}})).render(a.get("renderData")),b=g(b);a.setInternal("el",b)},__renderUI:function(){var a=
this.get("el"),b=this.get("childrenElSelectors"),c;for(c in b){var g=b[c];"function"===typeof g?this.setInternal(c,g(a)):this.setInternal(c,a.all(e.substitute(g,this.get("renderData"))))}this.get("srcNode")||(b=this.get("render"),(c=this.get("elBefore"))?a.insertBefore(c,void 0):b?a.appendTo(b,void 0):a.appendTo(d.body,void 0))},_onSetElAttrs:function(a){this.get("el").attr(a)},_onSetElCls:function(a){this.get("el").addClass(a.join(" "))},_onSetElStyle:function(a){this.get("el").css(a)},_onSetWidth:function(a){this.get("el").width(a)},
_onSetHeight:function(a){this.get("el").height(a)},_onSetContent:function(b){var d=this.get("contentEl");d.html(b);9>a.ie&&!this.get("allowTextSelection")&&d.unselectable(void 0)},_onSetVisible:function(a){var b=this.get("el"),d=this.getCssClassWithState("shown"),c=this.getCssClassWithState("hidden");a?(b.removeClass(c),b.addClass(d)):(b.removeClass(d),b.addClass(c))},__destructor:function(){var a=this.get("el");a&&a.remove()}};return b},{requires:["node","xtemplate"]});
KISSY.add("component/base/box",function(e){function f(){var c=this.getAttrs(),b,e,a=this.get("renderData");for(b in c)e=c[b],e.render&&!(b in a)&&(a[b]=this.get(b))}f.ATTRS={id:{view:1,render:1,valueFn:function(){return e.guid()}},content:{render:1,view:1},startTpl:{view:1},endTpl:{view:1},contentTpl:{view:1},renderData:{view:1,value:{}},childrenElSelectors:{view:1},width:{render:1,view:1},height:{render:1,view:1},elCls:{render:1,view:1,value:[]},elStyle:{render:1,view:1,value:{}},elAttrs:{render:1,
view:1,value:{}},elBefore:{view:1},el:{view:1},contentEl:{view:1},render:{view:1},visible:{sync:0,render:1,value:!0,view:1},srcNode:{view:1}};f.prototype={_onSetVisible:function(c){this.fire(c?"show":"hide")},show:function(){this.render();this.set("visible",!0);return this},hide:function(){this.set("visible",!1);return this}};return f});KISSY.add("component/base/container",function(e,f,c,b){return f.extend([c,b])},{requires:["./controller","./delegate-children","./decorate-children"]});
KISSY.add("component/base/controller",function(e,f,c,b,g,a,d,i){function p(a){return function(b){this==b.target&&(b=b.newVal,this.get("view").set(a,b))}}function s(a){return function(b){var d=this.get("view");return b===i?d.get(a):b}}function m(a){if(a.target===this){var b=a.component,d=this.get("children"),a=a.index;d.splice(a,0,b);this.get("rendered")&&(b=this.renderChild(b,a));this.fire("afterAddChild",{component:b,index:a})}}function n(a){if(a.target===this){var b=a.component,d,c,e=a.destroy,
i=this.get("children"),a=a.index;-1!=a&&i.splice(a,1);b.setInternal&&b.setInternal("parent",null);if(e)b.destroy&&b.destroy();else if(b.get&&(d=b.get("el")))d=d[0],(c=d.parentNode)&&c.removeChild(d);this.fire("afterRemoveChild",{component:b,index:a})}}function k(b){var d,c,g,f={},k,h=b.get("xrender");d=b.getAttrs();for(g in d)if(c=d[g],c.view){if((k=b.get(g))!==i)f[g]=k;b.on("after"+e.ucfirst(g)+"Change",p(g));c.getter=s(g)}b=b.constructor;for(c=[];b&&b!=r;)(d=a.getXClassByConstructor(b))&&c.push(d),
b=b.superclass&&b.superclass.constructor;f.ksComponentCss=c;return new h(f)}function h(a,b){var d=a.relatedTarget;return d&&(d===b[0]||b.contains(d))}function j(a,b){return function(d){if(!a.get("disabled"))a[b](d)}}var o=e.Env.host.document.documentMode||e.UA.ie,l=c.Gesture,q=e.Features.isTouchSupported(),r=g.extend([f],{isController:!0,getCssClassWithPrefix:a.getCssClassWithPrefix,initializer:function(){var a=this.get("defaultChildCfg");this.publish("beforeAddChild",{defaultFn:m});this.publish("beforeRemoveChild",
{defaultFn:n});a.prefixCls=a.prefixCls||this.get("prefixCls");this.setInternal("view",k(this))},createDom:function(){var a;a=this.get("view");a.create();a=a.getKeyEventTarget();this.get("allowTextSelection")||a.unselectable(i)},renderUI:function(){this.get("view").render();this.renderChildren()},bindUI:function(){var a=this.getKeyEventTarget();if(this.get("focusable"))a.on("focus",j(this,"handleFocus")).on("blur",j(this,"handleBlur")).on("keydown",j(this,"handleKeydown"));if(this.get("handleMouseEvents")){if(!q)a.on("mouseenter",
j(this,"handleMouseEnter")).on("mouseleave",j(this,"handleMouseLeave")).on("contextmenu",j(this,"handleContextMenu"));a.on(l.start,j(this,"handleMouseDown")).on(l.end,j(this,"handleMouseUp")).on("touchcancel",j(this,"handleMouseUp")).on(l.tap,j(this,"performActionInternal"));if(o&&9>o)a.on("dblclick",j(this,"handleDblClick"))}},renderChildren:function(){var a,b=this.get("children");for(a=0;a<b.length;a++)this.renderChild(b[a],a)},_onSetFocused:function(a){var b=this.getKeyEventTarget()[0];a?b.focus():
b.ownerDocument.body.focus()},focus:function(){this.get("focusable")&&this.set("focused",!0)},blur:function(){this.get("focusable")&&this.set("focused",!1)},getContentElement:function(){return this.get("view").getContentElement()},getKeyEventTarget:function(){return this.get("view").getKeyEventTarget()},addChild:function(a,d){var c=this.get("children");d===i&&(d=c.length);a=b.create(a,this);this.fire("beforeAddChild",{component:a,index:d});return a},renderChild:function(a,d){var c,i;c=this.get("children");
var g;"undefined"===typeof d&&(d=e.indexOf(a,c));a=b.create(a,this);c[d]=a;this.create();g=this.getContentElement();i=g[0];c=i.children[d]||null;a.get("rendered")?(g=a.get("el")[0],g.parentNode!=i&&i.insertBefore(g,c)):(c?a.set("elBefore",c):a.set("render",g),a.render());return a},removeChild:function(a,b){b===i&&(b=!0);this.fire("beforeRemoveChild",{component:a,index:e.indexOf(a,this.get("children")),destroy:b})},removeChildren:function(a){var b,d=[].concat(this.get("children"));for(b=0;b<d.length;b++)this.removeChild(d[b],
a);return this},getChildAt:function(a){return this.get("children")[a]||null},handleDblClick:function(a){this.performActionInternal(a)},handleMouseOver:function(a){var b=this.get("el");h(a,b)||this.handleMouseEnter(a)},handleMouseOut:function(a){var b=this.get("el");h(a,b)||this.handleMouseLeave(a)},handleMouseEnter:function(a){this.set("highlighted",!!a)},handleMouseLeave:function(a){this.set("active",!1);this.set("highlighted",!a)},handleMouseDown:function(a){var b;if(1==a.which||q)if(b=this.getKeyEventTarget(),
this.get("activeable")&&this.set("active",!0),this.get("focusable")&&(b[0].focus(),this.set("focused",!0)),!this.get("allowTextSelection"))b=(b=a.target.nodeName)&&b.toLowerCase(),"input"!=b&&"textarea"!=b&&a.preventDefault()},handleMouseUp:function(a){this.get("active")&&(1==a.which||q)&&this.set("active",!1)},handleContextMenu:function(){},handleFocus:function(a){this.set("focused",!!a);this.fire("focus")},handleBlur:function(a){this.set("focused",!a);this.fire("blur")},handleKeyEventInternal:function(a){return a.keyCode==
c.KeyCodes.ENTER?this.performActionInternal(a):i},handleKeydown:function(a){return this.handleKeyEventInternal(a)?(a.halt(),!0):i},performActionInternal:function(){},destructor:function(){var a,b=this.get("children");for(a=0;a<b.length;a++)b[a].destroy&&b[a].destroy();this.get("view").destroy()}},{ATTRS:{handleMouseEvents:{value:!0},focusable:{render:1,value:!0,view:1},allowTextSelection:{view:1,value:!1},activeable:{value:!0},focused:{view:1,sync:0,render:1},active:{view:1,render:1,value:!1},highlighted:{view:1,
render:1,value:!1},children:{value:[]},prefixCls:{value:e.config("component/prefixCls")||"ks-",render:1,view:1},prefixXClass:{},parent:{setter:function(a,b){(b=this.get("parent"))&&this.removeTarget(b);a&&this.addTarget(a)}},disabled:{view:1,render:1,value:!1},xrender:{value:d},defaultChildCfg:{value:{}}}},{xclass:"controller"});return r},{requires:"./box,event,./impl,./uibase,./manager,./render".split(",")});
KISSY.add("component/base/decorate-child",function(e,f){function c(){}e.augment(c,f,{decorateInternal:function(b){this.set("el",b);var c=this.get("defaultChildCfg").prefixCls;if(b=b.one("."+(c+this.get("decorateChildCls"))))(c=this.findChildConstructorFromNode(c,b))?this.decorateChildrenInternal(c,b):this.decorateChildren(b)}});return c},{requires:["./decorate-children"]});
KISSY.add("component/base/decorate-children",function(e,f){function c(){}e.augment(c,{decorateInternal:function(b){this.set("el",b);this.decorateChildren(b)},findChildConstructorFromNode:function(b,c){var a=c[0].className||"";return a?(a=a.replace(RegExp("\\b"+b,"ig"),""),f.getConstructorByXClass(a)):null},decorateChildrenInternal:function(b,c,a){a=e.merge(this.get("defaultChildCfg"),a,{srcNode:c});delete a.xclass;return this.addChild(new b(a))},decorateChildren:function(b){var c=this,a=c.get("defaultChildCfg").prefixCls,
d=c.get("defaultChildCfg").xclass;b.children().each(function(b){var e=c.findChildConstructorFromNode(a,b)||d&&f.getConstructorByXClass(d);c.decorateChildrenInternal(e,b)})}});return c},{requires:["./manager"]});
KISSY.add("component/base/delegate-children",function(e,f){function c(){}function b(a){if(!this.get("disabled")){var b=this.getOwnerControl(a.target,a);if(b&&!b.get("disabled"))switch(a.type){case d.start:b.handleMouseDown(a);break;case d.end:b.handleMouseUp(a);break;case d.tap:b.performActionInternal(a);break;case "mouseover":b.handleMouseOver(a);break;case "mouseout":b.handleMouseOut(a);break;case "contextmenu":b.handleContextMenu(a);break;case "dblclick":b.handleDblClick(a)}}}var g=e.UA,a=e.Env.host.document.documentMode||
g.ie,d=f.Gesture,i=e.Features.isTouchSupported();c.ATTRS={delegateChildren:{value:!0}};e.augment(c,{__bindUI:function(){var c;this.get("delegateChildren")&&(c=d.start+" "+d.end+" "+d.tap+" touchcancel ",i||(c+="mouseover mouseout contextmenu "+(a&&9>a?"dblclick ":"")),this.get("el").on(c,b,this))},getOwnerControl:function(a){for(var b=this.get("children"),d=b.length,c=this.get("el")[0];a&&a!==c;){for(var e=0;e<d;e++)if(b[e].get("el")[0]===a)return b[e];a=a.parentNode}return null}});return c},{requires:["event"]});
KISSY.add("component/base/impl",function(e,f,c){return{Manager:c,UIBase:f,create:function(b,g){var a;if(b){!b.isController&&g&&(e.mix(b,g.get("defaultChildCfg"),!1),!b.xclass&&b.prefixXClass&&(b.xclass=b.prefixXClass,b.xtype&&(b.xclass+="-"+b.xtype)));if(!b.isController&&(a=b.xclass))a=c.getConstructorByXClass(a),b=new a(b);b.isController&&g&&b.setInternal("parent",g)}return b}}},{requires:["./uibase","./manager"]});
KISSY.add("component/base/manager",function(e){function f(a){for(var a=e.trim(a).split(/\s+/),b=0;b<a.length;b++)a[b]&&(a[b]=this.get("prefixCls")+a[b]);return a.join(" ")}var c={},b={},g={__instances:b,addComponent:function(a,c){b[a]=c},removeComponent:function(a){delete b[a]},getComponent:function(a){return b[a]},getCssClassWithPrefix:f,getXClassByConstructor:function(a){for(var b in c)if(c[b].constructor==a)return b;return 0},getConstructorByXClass:function(a){for(var a=a.split(/\s+/),b=-1,e,g=
null,f=0;f<a.length;f++){var m=c[a[f]];if(m&&(e=m.priority)>b)b=e,g=m.constructor}return g},setConstructorByXClass:function(a,b){e.isFunction(b)?c[a]={constructor:b,priority:0}:(b.priority=b.priority||0,c[a]=b)}};g.getCssClassWithPrefix=f;return g});
KISSY.add("component/base/render",function(e,f,c,b,g){return b.extend([f],{initializer:function(){var a=this.get("renderData"),b=this.get("elCls");a.disabled&&b.push(this.getCssClassWithState("disabled"));b=this.get("elAttrs");a.disabled&&(b["aria-disabled"]="true");a.focusable&&(b.hideFocus="true",b.tabindex=a.disabled?"-1":"0")},isRender:1,getCssClassWithState:function(a){var b=this.get("ksComponentCss");if(!b)return"";(a=a||"")&&(a="-"+a);return this.getCssClassWithPrefix(b.join(a+" ")+a)},getCssClassWithPrefix:g.getCssClassWithPrefix,
getKeyEventTarget:function(){return this.get("el")},_onSetHighlighted:function(a){var b=this.getCssClassWithState("hover");this.get("el")[a?"addClass":"removeClass"](b)},_onSetDisabled:function(a){var b=this.getCssClassWithState("disabled");this.get("el")[a?"addClass":"removeClass"](b).attr("aria-disabled",a);this.get("focusable")&&this.getKeyEventTarget().attr("tabIndex",a?-1:0)},_onSetActive:function(a){var b=this.getCssClassWithState("active");this.get("el")[a?"addClass":"removeClass"](b).attr("aria-pressed",
!!a)},_onSetFocused:function(a){var b=this.get("el"),c=this.getCssClassWithState("focused");b[a?"addClass":"removeClass"](c)},getContentElement:function(){return this.get("contentEl")||this.get("el")}},{ATTRS:{prefixCls:{},focusable:{},focused:{sync:0},active:{sync:0},disabled:{sync:0},highlighted:{sync:0}},HTML_PARSER:{disabled:function(){var a=this.getCssClassWithState("disabled");return this.get("el").hasClass(a)}}})},{requires:["./box-render","./impl","./uibase","./manager"]});
KISSY.add("component/base/uibase",function(e,f,c,b,g){var c=e.noop,a=f.extend({constructor:function(){var b;a.superclass.constructor.apply(this,arguments);this.decorateInternal&&(b=this.get("srcNode"))&&this.decorateInternal(b);this.get("autoRender")&&this.render()},bindInternal:c,syncInternal:c,initializer:function(){var a,c=e.one(this.get("srcNode"));(a=this.get("id"))&&b.addComponent(a,this);if(c){var d=this.constructor,f,n;n=this.collectConstructorChains();for(a=n.length-1;0<=a;a--)if(d=n[a],
f=d.HTML_PARSER){var d=c,k=void 0,h=void 0,h=void 0,j=this.userConfig||{};for(k in f)k in j||(h=f[k],e.isFunction(h)?(h=h.call(this,d),h!==g&&this.setInternal(k,h)):"string"==typeof h?this.setInternal(k,d.one(h)):e.isArray(h)&&h[0]&&this.setInternal(k,d.all(h[0])))}this.setInternal("srcNode",c)}},create:function(){this.get("created")||(this.fire("beforeCreateDom"),this.callMethodByHierarchy("createDom","__createDom"),this.setInternal("created",!0),this.fire("afterCreateDom"),this.callPluginsMethod("createDom"));
return this},render:function(){this.get("rendered")||(this.create(g),this.fire("beforeRenderUI"),this.callMethodByHierarchy("renderUI","__renderUI"),this.fire("afterRenderUI"),this.callPluginsMethod("renderUI"),this.fire("beforeBindUI"),a.superclass.bindInternal.call(this),this.callMethodByHierarchy("bindUI","__bindUI"),this.fire("afterBindUI"),this.callPluginsMethod("bindUI"),a.superclass.syncInternal.call(this),this.sync(),this.setInternal("rendered",!0));return this},sync:function(){this.fire("beforeSyncUI");
this.callMethodByHierarchy("syncUI","__syncUI");this.fire("afterSyncUI");this.callPluginsMethod("syncUI")},createDom:c,renderUI:c,bindUI:c,syncUI:c,plug:function(){var b;b=this.get("plugins");a.superclass.plug.apply(this,arguments);b=b[b.length-1];this.get("rendered")?(b.pluginCreateDom&&b.pluginCreateDom(this),b.pluginRenderUI&&b.pluginRenderUI(this),b.pluginBindUI&&b.pluginBindUI(this),b.pluginSyncUI&&b.pluginSyncUI(this)):this.get("created")&&b.pluginCreateDom&&b.pluginCreateDom(this);return this},
destructor:function(){var a;(a=this.get("id"))&&b.removeComponent(a)}},{name:"UIBase",ATTRS:{rendered:{value:!1},created:{value:!1},xclass:{valueFn:function(){return b.getXClassByConstructor(this.constructor)}}}}),d=a.extend;e.mix(a,{HTML_PARSER:{},extend:function p(a,c,g){var f=e.makeArray(arguments),h={},j,o=f.length,l=f[o-1];if(j=l.xclass)f[o-2].name=j;f=d.apply(this,f);e.isArray(a)&&(e.each(a.concat(f),function(a){a&&e.each(a.HTML_PARSER,function(a,b){h[b]=a})}),f.HTML_PARSER=h);j&&b.setConstructorByXClass(j,
{constructor:f,priority:l.priority});f.extend=p;return f}});return a},{requires:["rich-base","node","./manager"]});
