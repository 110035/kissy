/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jun 5 22:25
*/
KISSY.add("component/base/manager",function(){var b=0,d={},c={};return{__instances:c,addComponent:function(a,b){c[a]=b},removeComponent:function(a){delete c[a]},getComponent:function(a){return c[a]},getXClassByConstructor:function(a){for(var b in d)if(d[b].constructor==a)return b;return 0},getConstructorByXClass:function(a){var a=a.split(/\s+/),b=-1,c,k,i,h=null;for(k=0;k<a.length;k++)if((i=d[a[k]])&&(c=i.priority)>b)b=c,h=i.constructor;return h},setConstructorByXClass:function(a,c){d[a]={constructor:c,
priority:b++}}}});
KISSY.add("component/base/uibase",function(b,d,c,a,n){var c=b.noop,g=d.extend({constructor:function(){var a;g.superclass.constructor.apply(this,arguments);this.decorateInternal&&(a=this.get("srcNode"))&&this.decorateInternal(a);this.get("autoRender")&&this.render()},bindInternal:c,syncInternal:c,initializer:function(){var i,h=b.one(this.get("srcNode"));(i=this.get("id"))&&a.addComponent(i,this);if(h){var f=this.constructor,o,j;j=this.collectConstructorChains();for(i=j.length-1;0<=i;i--)if(f=j[i],
o=f.HTML_PARSER){var f=h,c=void 0,e=void 0,e=void 0;for(c in o)e=o[c],b.isFunction(e)?(e=e.call(this,f),e!==n&&this.setInternal(c,e)):"string"==typeof e?this.setInternal(c,f.one(e)):b.isArray(e)&&e[0]&&this.setInternal(c,f.all(e[0]))}this.setInternal("srcNode",h)}},create:function(){this.get("created")||(this.fire("beforeCreateDom"),this.callMethodByHierarchy("createDom","__createDom"),this.setInternal("created",!0),this.fire("afterCreateDom"),this.callPluginsMethod("createDom"));return this},render:function(){this.get("rendered")||
(this.create(n),this.fire("beforeRenderUI"),this.callMethodByHierarchy("renderUI","__renderUI"),this.fire("afterRenderUI"),this.callPluginsMethod("renderUI"),this.fire("beforeBindUI"),g.superclass.bindInternal.call(this),this.callMethodByHierarchy("bindUI","__bindUI"),this.fire("afterBindUI"),this.callPluginsMethod("bindUI"),g.superclass.syncInternal.call(this),this.sync(),this.setInternal("rendered",!0));return this},sync:function(){this.fire("beforeSyncUI");this.callMethodByHierarchy("syncUI","__syncUI");
this.fire("afterSyncUI");this.callPluginsMethod("syncUI")},createDom:c,renderUI:c,bindUI:c,syncUI:c,plug:function(){var a;a=this.get("plugins");g.superclass.plug.apply(this,arguments);a=a[a.length-1];this.get("rendered")?(a.pluginCreateDom&&a.pluginCreateDom(this),a.pluginRenderUI&&a.pluginRenderUI(this),a.pluginBindUI&&a.pluginBindUI(this),a.pluginSyncUI&&a.pluginSyncUI(this)):this.get("created")&&a.pluginCreateDom&&a.pluginCreateDom(this);return this},destructor:function(){var b;(b=this.get("id"))&&
a.removeComponent(b)}},{name:"UIBase",ATTRS:{rendered:{value:!1},created:{value:!1},xclass:{valueFn:function(){return a.getXClassByConstructor(this.constructor)}}}}),k=g.extend;b.mix(g,{HTML_PARSER:{},extend:function h(f,o,c){var m=b.makeArray(arguments),e={},g,d=m.length;if(g=m[d-1].xclass)m[d-2].name=g;m=k.apply(this,m);b.isArray(f)&&(b.each(f.concat(m),function(f){f&&b.each(f.HTML_PARSER,function(f,a){e[a]=f})}),m.HTML_PARSER=e);g&&a.setConstructorByXClass(g,m);m.extend=h;return m}});return g},
{requires:["rich-base","node","./manager"]});KISSY.add("component/base/impl",function(b,d,c){return{Manager:c,UIBase:d,create:function(a,d){var g;if(a){!a.isController&&d&&(b.mix(a,d.get("defaultChildCfg"),!1),!a.xclass&&a.prefixXClass&&(a.xclass=a.prefixXClass,a.xtype&&(a.xclass+="-"+a.xtype)));if(!a.isController&&(g=a.xclass))g=c.getConstructorByXClass(g),a=new g(a);a.isController&&d&&a.setInternal("parent",d)}return a}}},{requires:["./uibase","./manager"]});
KISSY.add("component/base/box",function(b){function d(){}d.ATTRS={id:{view:1,valueFn:function(){return b.guid()}},content:{view:1,value:""},contentTpl:{view:1},renderData:{view:1,value:{}},childrenElSelectors:{view:1},width:{view:1},height:{view:1},elCls:{view:1,value:[],setter:function(b){"string"==typeof b&&(b=b.split(/\s+/));return b||[]}},elStyle:{view:1,value:{}},elAttrs:{view:1,value:{}},elBefore:{view:1},el:{view:1},render:{view:1},visible:{sync:0,value:!0,view:1},srcNode:{view:1}};d.prototype=
{_onSetVisible:function(b){this.fire(b?"show":"hide")},show:function(){this.render();this.set("visible",!0);return this},hide:function(){this.set("visible",!1);return this}};return d});KISSY.add("component/base/box-tpl",function(){return'<div id="ks-component{{id}}" class="{{getBaseCssClasses ""}} {{#each elCls}} {{.}} {{/each}} " {{#each elAttrs}} {{xkey}}="{{.}}" {{/each}} style=" {{#each elStyle}} {{xkey}}:{{.}}; {{/each}} ">'});
KISSY.add("component/base/box-render",function(b,d,c,a){function n(f){"number"==typeof f&&(f+="px");return f}function g(){var f,a,h=this.get("elStyle"),b=this.get("elCls"),e;if(!this.get("srcNode")){f=this.getAttrs();e=this.get("renderData");for(a in f)"renderData"!=a&&!(a in e)&&(e[a]=this.get(a));f=e.width;a=e.height;e=e.visible;f&&(h.width=n(f));a&&(h.height=n(a));e||b.push(this.getBaseCssClasses("hidden"))}}var k=b.all,i=b.UA,h=b.Env.host.document;g.ATTRS={id:{},el:{},elCls:{sync:0},elStyle:{sync:0},
width:{sync:0},height:{sync:0},elAttrs:{sync:0},elBefore:{sync:0},render:{},visible:{sync:0},contentTpl:{value:"{{{content}}}"},renderData:{},childrenElSelectors:{value:{}}};g.HTML_PARSER={content:function(a){return a.html()}};g.prototype={__createDom:function(){var f=this,h=f.get("renderData"),j;if(j=f.get("srcNode")){if((j=k(j))&&!j[0].id)j[0].id="ks-component"+b.guid()}else{j=a+f.get("contentTpl")+"</div>";j=(new c(j,{commands:{getBaseCssClasses:function(a,h){return f.getBaseCssClasses(h.params[0])}}})).render(h);
j=k(j);var h=f.get("childrenElSelectors"),d;for(d in h){var e=h[d];"function"===typeof e?f.setInternal(d,e(j)):f.setInternal(d,j.all(b.substitute(e,this.get("renderData"))))}}f.setInternal("el",j)},__renderUI:function(){if(!this.get("srcNode")){var a=this.get("render"),b=this.get("el"),c=this.get("elBefore");c?b.insertBefore(c,void 0):a?b.appendTo(a,void 0):b.appendTo(h.body,void 0)}},_onSetWidth:function(a){this.get("el").width(a)},_onSetHeight:function(a){this.get("el").height(a)},_onSetContent:function(a){var h=
this.get("el");h.html(a);9>i.ie&&!this.get("allowTextSelection")&&h.unselectable()},_onSetVisible:function(a){var h=this.get("el"),b=this.getBaseCssClasses("hidden");a?h.removeClass(b):h.addClass(b)},__destructor:function(){var a=this.get("el");a&&a.remove()}};return g},{requires:["node","xtemplate","./box-tpl"]});
KISSY.add("component/base/render",function(b,d,c,a){function n(a){a||(a=[""]);"string"==typeof a&&(a=a.split(/\s+/));return a}function g(a,b,c){for(var d="",g=0,e=c.length,b=a+b;g<e;g++)a=(a=c[g])?"-"+a:a,d+=" "+b+a;return d}var k=b.trim,i;return i=a.extend([d],{initializer:function(){var a=this.get("elAttrs"),b=this.get("elCls"),c;if(c=this.get("disabled"))b.push(this.getBaseCssClasses("disabled")),a["aria-disabled"]="true";this.get("highlighted")&&b.push(this.getBaseCssClasses("hover"));this.get("focusable")&&
(a.hideFocus="true",a.tabindex=c?"-1":"0")},isRender:1,getBaseCssClasses:function(a){return i.getBaseCssClasses(this,a)},getBaseCssClass:function(a){return i.getBaseCssClass(this,a)},getKeyEventTarget:function(){return this.get("el")},_onSetHighlighted:function(a){var b=this.getBaseCssClasses("hover");this.get("el")[a?"addClass":"removeClass"](b)},_onSetDisabled:function(a){var b=this.getBaseCssClasses("disabled");this.get("el")[a?"addClass":"removeClass"](b).attr("aria-disabled",a);this.get("focusable")&&
this.getKeyEventTarget().attr("tabindex",a?-1:0)},_onSetActive:function(a){var b=this.getBaseCssClasses("active");this.get("el")[a?"addClass":"removeClass"](b).attr("aria-pressed",!!a)},_onSetFocused:function(a){var b=this.get("el"),c=this.getBaseCssClasses("focused");b[a?"addClass":"removeClass"](c)},getChildrenContainerEl:function(){return this.get("el")}},{getBaseCssClasses:function(a,b){for(var b=n(b),c=a.componentCssClasses,d=0,i="",e=c.length,l=a.prefixCls;d<e;d++)i+=g(l,c[d],b);return k(i)},
getBaseCssClass:function(a,b){return k(g(a.prefixCls,a.componentCssClasses[0],n(b)))},ATTRS:{prefixCls:{setter:function(a){this.prefixCls=a}},componentCssClasses:{setter:function(a){this.componentCssClasses=a}},focusable:{},focused:{sync:0},active:{sync:0},disabled:{sync:0},highlighted:{sync:0}},HTML_PARSER:{disabled:function(a){return a.hasClass(this.getBaseCssClass("disabled"))}}})},{requires:["./box-render","./impl","./uibase"]});
KISSY.add("component/base/controller",function(b,d,c,a,n,g,k,i){function h(a){return function(b){this==b.target&&(b=b.newVal,this.get("view").set(a,b))}}function f(a){return function(b){var c,d=this.get("view");d&&(c=d.get(a));return c===i?b:c}}function o(a){if(a.target===this){var b=a.component,c=this.get("children"),a=a.index;c.splice(a,0,b);this.get("rendered")&&(b=this.renderChild(b,a));this.fire("afterAddChild",{component:b,index:a})}}function j(a){if(a.target===this){var b=a.component,c,d,f=
a.destroy,e=this.get("children"),a=a.index;-1!=a&&e.splice(a,1);b.setInternal&&b.setInternal("parent",null);if(f)b.destroy&&b.destroy();else if(b.get&&(c=b.get("el")))c=c[0],(d=c.parentNode)&&d.removeChild(c);this.fire("afterRemoveChild",{component:b,index:a})}}function m(a){var c,d,e,g={},j,k=a.get("xrender");c=a.getAttrs();for(e in c)if(d=c[e],d.view){if((j=a.get(e))!==i)g[e]=j;a.on("after"+b.ucfirst(e)+"Change",h(e));d.getter=f(e)}return new k(g)}function e(a,b){var c=a.relatedTarget;return c&&
(c===b[0]||b.contains(c))}function l(a,b){return function(c){if(!a.get("disabled"))a[b](c)}}var r=b.Env.host.document.documentMode||b.UA.ie,p=c.Gesture,q=b.Features.isTouchEventSupported(),s=n.extend([d],{isController:!0,getBaseCssClass:function(a){return k.getBaseCssClass(this,a)},initializer:function(){var a,b=this.get("defaultChildCfg");a=this.prefixCls=this.get("prefixCls");this.componentCssClasses=this.get("componentCssClasses");this.publish("beforeAddChild",{defaultFn:o});this.publish("beforeRemoveChild",
{defaultFn:j});b.prefixCls=b.prefixCls||a},createChild:function(b){return a.create(b,this)},createDom:function(){var a;this.setInternal("view",a=m(this));a.create();a=a.getKeyEventTarget();this.get("allowTextSelection")||a.unselectable()},renderUI:function(){this.get("view").render();this.renderChildren()},bindUI:function(){var a=this.getKeyEventTarget();if(this.get("focusable"))a.on("focus",l(this,"handleFocus")).on("blur",l(this,"handleBlur")).on("keydown",l(this,"handleKeydown"));if(this.get("handleMouseEvents")){a=
this.get("el");if(!q)a.on("mouseenter",l(this,"handleMouseEnter")).on("mouseleave",l(this,"handleMouseLeave")).on("contextmenu",l(this,"handleContextMenu"));a.on(p.start,l(this,"handleMouseDown")).on(p.end,l(this,"handleMouseUp")).on(p.tap,l(this,"performActionInternal"));if(p.cancel)a.on(p.cancel,l(this,"handleMouseUp"));if(r&&9>r)a.on("dblclick",l(this,"handleDblClick"))}},renderChildren:function(){var a,b=this.get("children");for(a=0;a<b.length;a++)this.renderChild(b[a],a)},_onSetFocused:function(a){var b=
this.getKeyEventTarget()[0];a?b.focus():b.ownerDocument.activeElement==b&&b.ownerDocument.body.focus()},focus:function(){this.get("focusable")&&this.set("focused",!0)},blur:function(){this.get("focusable")&&this.set("focused",!1)},getChildrenContainerEl:function(){return this.get("view").getChildrenContainerEl()},getKeyEventTarget:function(){return this.get("view").getKeyEventTarget()},addChild:function(a,b){var c=this.get("children");b===i&&(b=c.length);a=this.createChild(a);this.fire("beforeAddChild",
{component:a,index:b});return a},renderChild:function(a,c){var d,e;d=this.get("children");var f;"undefined"===typeof c&&(c=b.indexOf(a,d));a=this.createChild(a);d[c]=a;this.create();f=this.getChildrenContainerEl();e=f[0];d=e.children[c]||null;a.get("rendered")?(f=a.get("el")[0],f.parentNode!=e&&e.insertBefore(f,d)):(d?a.set("elBefore",d):a.set("render",f),a.render());return a},removeChild:function(a,c){c===i&&(c=!0);this.fire("beforeRemoveChild",{component:a,index:b.indexOf(a,this.get("children")),
destroy:c})},removeChildren:function(a){var b,c=[].concat(this.get("children"));for(b=0;b<c.length;b++)this.removeChild(c[b],a);return this},getChildAt:function(a){return this.get("children")[a]||null},handleDblClick:function(a){this.performActionInternal(a)},handleMouseOver:function(a){var b=this.get("el");e(a,b)||this.handleMouseEnter(a)},handleMouseOut:function(a){var b=this.get("el");e(a,b)||this.handleMouseLeave(a)},handleMouseEnter:function(a){this.set("highlighted",!!a)},handleMouseLeave:function(a){this.set("active",
!1);this.set("highlighted",!a)},handleMouseDown:function(a){var b;if(1==a.which||q)if(b=this.getKeyEventTarget(),this.get("activeable")&&this.set("active",!0),this.get("focusable")&&(b[0].focus(),this.set("focused",!0)),!this.get("allowTextSelection"))b=(b=a.target.nodeName)&&b.toLowerCase(),"input"!=b&&"textarea"!=b&&a.preventDefault()},handleMouseUp:function(a){this.get("active")&&(1==a.which||q)&&this.set("active",!1)},handleContextMenu:function(){},handleFocus:function(a){this.set("focused",!!a);
this.fire("focus")},handleBlur:function(a){this.set("focused",!a);this.fire("blur")},handleKeyEventInternal:function(a){return a.keyCode==Event.KeyCode.ENTER?this.performActionInternal(a):i},handleKeydown:function(a){return this.handleKeyEventInternal(a)?(a.halt(),!0):i},performActionInternal:function(){},destructor:function(){var a,b=this.get("view"),c=this.get("children");for(a=0;a<c.length;a++)c[a].destroy&&c[a].destroy();b&&b.destroy()}},{ATTRS:{handleMouseEvents:{value:!0},focusable:{value:!0,
view:1},allowTextSelection:{view:1,value:!1},activeable:{value:!0},focused:{view:1},active:{view:1,value:!1},highlighted:{view:1,value:!1},children:{value:[]},prefixCls:{value:b.config("component/prefixCls")||"ks-",view:1},prefixXClass:{},parent:{setter:function(a,b){(b=this.get("parent"))&&this.removeTarget(b);a&&this.addTarget(a)}},disabled:{view:1,value:!1},xrender:{value:k},componentCssClasses:{view:1,valueFn:function(){for(var a=this.constructor,b,c=[];a&&a!=s;)(b=g.getXClassByConstructor(a))&&
c.push(b),a=a.superclass&&a.superclass.constructor;return c}},defaultChildCfg:{view:1,value:{}}}},{xclass:"controller"});return s},{requires:"./box,node,./impl,./uibase,./manager,./render".split(",")});KISSY.add("component/base",function(b,d,c,a){b.mix(d,{Controller:c,Render:a});return d},{requires:["./base/impl","./base/controller","./base/render"]});
