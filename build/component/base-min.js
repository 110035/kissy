/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: May 14 20:12
*/
KISSY.add("component/base",function(h,j,d,b){h.mix(j,{Controller:d,Render:b});return j},{requires:["./base/impl","./base/controller","./base/render"]});
KISSY.add("component/base/box-render",function(h,j,d,b){function g(){if(!this.get("srcNode")){var a=this.getAttrs(),b,f=this.get("renderData");for(b in a)"renderData"!=b&&!(b in f)&&(f[b]=this.get(b))}}var a=h.all,e=h.UA,f=h.Env.host.document;g.ATTRS={id:{},el:{},elCls:{sync:0,setter:function(a){"string"==typeof a&&(a=a.split(/\s+/));return a}},elStyle:{sync:0},width:{sync:0},height:{sync:0},elAttrs:{sync:0},elBefore:{sync:0},render:{},visible:{sync:0},contentTpl:{value:"{{{content}}}"},renderData:{},
childrenElSelectors:{value:{}}};g.HTML_PARSER={content:function(a){return a.html()}};g.prototype={__createDom:function(){var f=this,e=f.get("renderData"),i;if(i=f.get("srcNode")){if((i=a(i))&&!i[0].id)i[0].id="ks-component"+h.guid()}else{i=b+f.get("contentTpl")+"</div>";i=(new d(i,{commands:{getCssClassWithState:function(a,b){return f.getCssClassWithState(b.params[0])}}})).render(e);i=a(i);var e=f.get("childrenElSelectors"),g;for(g in e){var k=e[g];"function"===typeof k?f.setInternal(g,k(i)):f.setInternal(g,
i.all(h.substitute(k,this.get("renderData"))))}}f.setInternal("el",i)},__renderUI:function(){if(!this.get("srcNode")){var a=this.get("render"),b=this.get("el"),e=this.get("elBefore");e?b.insertBefore(e,void 0):a?b.appendTo(a,void 0):b.appendTo(f.body,void 0)}},_onSetWidth:function(a){this.get("el").width(a)},_onSetHeight:function(a){this.get("el").height(a)},_onSetContent:function(a){var b=this.get("el");b.html(a);9>e.ie&&!this.get("allowTextSelection")&&b.unselectable(void 0)},_onSetVisible:function(a){var b=
this.get("el"),f=this.getCssClassWithState("shown"),e=this.getCssClassWithState("hidden");a?(b.removeClass(e),b.addClass(f)):(b.removeClass(f),b.addClass(e))},__destructor:function(){var a=this.get("el");a&&a.remove()}};return g},{requires:["node","xtemplate","./box-tpl"]});KISSY.add("component/base/box-tpl",function(){return'<div id="ks-component{{id}}"   class="{{getCssClassWithState ""}}  {{#if visible}}  {{getCssClassWithState "shown"}}   {{else}}  {{getCssClassWithState "hidden"}}   {{/if}}    {{#each elCls}}   {{.}}   {{/each}} "  {{#each elAttrs}}   {{xkey}}="{{.}}"   {{/each}}  style=" {{#each elStyle}}   {{xkey}}:{{.}};   {{/each}}  {{#if width}}  width:{{width}};  {{/if}}   {{#if height}}  height:{{height}};  {{/if}}  ">'});
KISSY.add("component/base/box",function(h){function j(){}function d(b){"number"==typeof b&&(b+="px");return b}j.ATTRS={id:{view:1,valueFn:function(){return h.guid()}},content:{view:1,value:""},contentTpl:{view:1},renderData:{view:1,value:{}},childrenElSelectors:{view:1},width:{view:1,setter:d},height:{view:1,setter:d},elCls:{view:1,value:[]},elStyle:{view:1,value:{}},elAttrs:{view:1,value:{}},elBefore:{view:1},el:{view:1},render:{view:1},visible:{sync:0,value:!0,view:1},srcNode:{view:1}};j.prototype=
{_onSetVisible:function(b){this.fire(b?"show":"hide")},show:function(){this.render();this.set("visible",!0);return this},hide:function(){this.set("visible",!1);return this}};return j});
KISSY.add("component/base/controller",function(h,j,d,b,g,a,e,f){function p(c){return function(a){this==a.target&&(a=a.newVal,this.get("view").set(c,a))}}function s(c){return function(a){var b,e=this.get("view");e&&(b=e.get(c));return b===f?a:b}}function i(c){if(c.target===this){var a=c.component,b=this.get("children"),c=c.index;b.splice(c,0,a);this.get("rendered")&&(a=this.renderChild(a,c));this.fire("afterAddChild",{component:a,index:c})}}function t(c){if(c.target===this){var a=c.component,b,f,e=
c.destroy,h=this.get("children"),c=c.index;-1!=c&&h.splice(c,1);a.setInternal&&a.setInternal("parent",null);if(e)a.destroy&&a.destroy();else if(a.get&&(b=a.get("el")))b=b[0],(f=b.parentNode)&&f.removeChild(b);this.fire("afterRemoveChild",{component:a,index:c})}}function k(c){var b,e,d,g={},i,k=c.get("xrender");b=c.getAttrs();for(d in b)if(e=b[d],e.view){if((i=c.get(d))!==f)g[d]=i;c.on("after"+h.ucfirst(d)+"Change",p(d));e.getter=s(d)}c=c.constructor;for(e=[];c&&c!=r;)(b=a.getXClassByConstructor(c))&&
e.push(b),c=c.superclass&&c.superclass.constructor;g.ksComponentCss=e;return new k(g)}function m(c,a){var b=c.relatedTarget;return b&&(b===a[0]||a.contains(b))}function l(c,a){return function(b){if(!c.get("disabled"))c[a](b)}}var o=h.Env.host.document.documentMode||h.UA.ie,n=d.Gesture,q=h.Features.isTouchSupported(),r=g.extend([j],{isController:!0,getCssClassWithPrefix:a.getCssClassWithPrefix,initializer:function(){var c=this.get("defaultChildCfg");this.publish("beforeAddChild",{defaultFn:i});this.publish("beforeRemoveChild",
{defaultFn:t});c.prefixCls=c.prefixCls||this.get("prefixCls")},createChild:function(c){return b.create(c,this)},createDom:function(){var c;this.setInternal("view",c=k(this));c.create();c=c.getKeyEventTarget();this.get("allowTextSelection")||c.unselectable()},renderUI:function(){this.get("view").render();this.renderChildren()},bindUI:function(){var c=this.getKeyEventTarget();if(this.get("focusable"))c.on("focus",l(this,"handleFocus")).on("blur",l(this,"handleBlur")).on("keydown",l(this,"handleKeydown"));
if(this.get("handleMouseEvents")){c=this.get("el");if(!q)c.on("mouseenter",l(this,"handleMouseEnter")).on("mouseleave",l(this,"handleMouseLeave")).on("contextmenu",l(this,"handleContextMenu"));c.on(n.start,l(this,"handleMouseDown")).on(n.end,l(this,"handleMouseUp")).on("touchcancel",l(this,"handleMouseUp")).on(n.tap,l(this,"performActionInternal"));if(o&&9>o)c.on("dblclick",l(this,"handleDblClick"))}},renderChildren:function(){var c,a=this.get("children");for(c=0;c<a.length;c++)this.renderChild(a[c],
c)},_onSetFocused:function(c){var a=this.getKeyEventTarget()[0];c?a.focus():a.ownerDocument.body.focus()},focus:function(){this.get("focusable")&&this.set("focused",!0)},blur:function(){this.get("focusable")&&this.set("focused",!1)},getChildrenContainerEl:function(){return this.get("view").getChildrenContainerEl()},getKeyEventTarget:function(){return this.get("view").getKeyEventTarget()},addChild:function(c,a){var e=this.get("children");a===f&&(a=e.length);c=b.create(c,this);this.fire("beforeAddChild",
{component:c,index:a});return c},renderChild:function(a,e){var f,d;f=this.get("children");var g;"undefined"===typeof e&&(e=h.indexOf(a,f));a=b.create(a,this);f[e]=a;this.create();g=this.getChildrenContainerEl();d=g[0];f=d.children[e]||null;a.get("rendered")?(g=a.get("el")[0],g.parentNode!=d&&d.insertBefore(g,f)):(f?a.set("elBefore",f):a.set("render",g),a.render());return a},removeChild:function(a,b){b===f&&(b=!0);this.fire("beforeRemoveChild",{component:a,index:h.indexOf(a,this.get("children")),destroy:b})},
removeChildren:function(a){var b,e=[].concat(this.get("children"));for(b=0;b<e.length;b++)this.removeChild(e[b],a);return this},getChildAt:function(a){return this.get("children")[a]||null},handleDblClick:function(a){this.performActionInternal(a)},handleMouseOver:function(a){var b=this.get("el");m(a,b)||this.handleMouseEnter(a)},handleMouseOut:function(a){var b=this.get("el");m(a,b)||this.handleMouseLeave(a)},handleMouseEnter:function(a){this.set("highlighted",!!a)},handleMouseLeave:function(a){this.set("active",
!1);this.set("highlighted",!a)},handleMouseDown:function(a){var b;if(1==a.which||q)if(b=this.getKeyEventTarget(),this.get("activeable")&&this.set("active",!0),this.get("focusable")&&(b[0].focus(),this.set("focused",!0)),!this.get("allowTextSelection"))b=(b=a.target.nodeName)&&b.toLowerCase(),"input"!=b&&"textarea"!=b&&a.preventDefault()},handleMouseUp:function(a){this.get("active")&&(1==a.which||q)&&this.set("active",!1)},handleContextMenu:function(){},handleFocus:function(a){this.set("focused",!!a);
this.fire("focus")},handleBlur:function(a){this.set("focused",!a);this.fire("blur")},handleKeyEventInternal:function(a){return a.keyCode==d.KeyCodes.ENTER?this.performActionInternal(a):f},handleKeydown:function(a){return this.handleKeyEventInternal(a)?(a.halt(),!0):f},performActionInternal:function(){},destructor:function(){var a,b=this.get("view"),e=this.get("children");for(a=0;a<e.length;a++)e[a].destroy&&e[a].destroy();b&&b.destroy()}},{ATTRS:{handleMouseEvents:{value:!0},focusable:{value:!0,view:1},
allowTextSelection:{view:1,value:!1},activeable:{value:!0},focused:{view:1},active:{view:1,value:!1},highlighted:{view:1,value:!1},children:{value:[]},prefixCls:{value:h.config("component/prefixCls")||"ks-",view:1},prefixXClass:{},parent:{setter:function(a,b){(b=this.get("parent"))&&this.removeTarget(b);a&&this.addTarget(a)}},disabled:{view:1,value:!1},xrender:{value:e},defaultChildCfg:{view:1,value:{}}}},{xclass:"controller"});return r},{requires:"./box,event,./impl,./uibase,./manager,./render".split(",")});
KISSY.add("component/base/impl",function(h,j,d){return{Manager:d,UIBase:j,create:function(b,g){var a;if(b){!b.isController&&g&&(h.mix(b,g.get("defaultChildCfg"),!1),!b.xclass&&b.prefixXClass&&(b.xclass=b.prefixXClass,b.xtype&&(b.xclass+="-"+b.xtype)));if(!b.isController&&(a=b.xclass))a=d.getConstructorByXClass(a),b=new a(b);b.isController&&g&&b.setInternal("parent",g)}return b}}},{requires:["./uibase","./manager"]});
KISSY.add("component/base/manager",function(h){function j(a){for(var a=h.trim(a).split(/\s+/),b=0;b<a.length;b++)a[b]&&(a[b]=this.get("prefixCls")+a[b]);return a.join(" ")}var d={},b={},g={__instances:b,addComponent:function(a,e){b[a]=e},removeComponent:function(a){delete b[a]},getComponent:function(a){return b[a]},getCssClassWithPrefix:j,getXClassByConstructor:function(a){for(var b in d)if(d[b].constructor==a)return b;return 0},getConstructorByXClass:function(a){for(var a=a.split(/\s+/),b=-1,f,h=
null,g=0;g<a.length;g++){var i=d[a[g]];if(i&&(f=i.priority)>b)b=f,h=i.constructor}return h},setConstructorByXClass:function(a,b){h.isFunction(b)?d[a]={constructor:b,priority:0}:(b.priority=b.priority||0,d[a]=b)}};g.getCssClassWithPrefix=j;return g});
KISSY.add("component/base/render",function(h,j,d,b,g){return b.extend([j],{initializer:function(){var a=this.get("elAttrs"),b=this.get("elCls"),f;if(f=this.get("disabled"))b.push(this.getCssClassWithState("disabled")),a["aria-disabled"]="true";this.get("highlighted")&&b.push(this.getCssClassWithState("hover"));this.get("focusable")&&(a.hideFocus="true",a.tabindex=f?"-1":"0")},isRender:1,getCssClassWithState:function(a){var b=this.get("ksComponentCss");if(!b)return"";(a=a||"")&&(a="-"+a);return this.getCssClassWithPrefix(b.join(a+
" ")+a)},getCssClassWithPrefix:g.getCssClassWithPrefix,getKeyEventTarget:function(){return this.get("el")},_onSetHighlighted:function(a){var b=this.getCssClassWithState("hover");this.get("el")[a?"addClass":"removeClass"](b)},_onSetDisabled:function(a){var b=this.getCssClassWithState("disabled");this.get("el")[a?"addClass":"removeClass"](b).attr("aria-disabled",a);this.get("focusable")&&this.getKeyEventTarget().attr("tabIndex",a?-1:0)},_onSetActive:function(a){var b=this.getCssClassWithState("active");
this.get("el")[a?"addClass":"removeClass"](b).attr("aria-pressed",!!a)},_onSetFocused:function(a){var b=this.get("el"),f=this.getCssClassWithState("focused");b[a?"addClass":"removeClass"](f)},getChildrenContainerEl:function(){return this.get("el")}},{ATTRS:{prefixCls:{},focusable:{},focused:{sync:0},active:{sync:0},disabled:{sync:0},highlighted:{sync:0}},HTML_PARSER:{disabled:function(a){var b=this.getCssClassWithState("disabled");return a.hasClass(b)}}})},{requires:["./box-render","./impl","./uibase",
"./manager"]});
KISSY.add("component/base/uibase",function(h,j,d,b,g){var d=h.noop,a=j.extend({constructor:function(){var b;a.superclass.constructor.apply(this,arguments);this.decorateInternal&&(b=this.get("srcNode"))&&this.decorateInternal(b);this.get("autoRender")&&this.render()},bindInternal:d,syncInternal:d,initializer:function(){var a,e=h.one(this.get("srcNode"));(a=this.get("id"))&&b.addComponent(a,this);if(e){var d=this.constructor,i,j;j=this.collectConstructorChains();for(a=j.length-1;0<=a;a--)if(d=j[a],
i=d.HTML_PARSER){var d=e,k=void 0,m=void 0,m=void 0;for(k in i)m=i[k],h.isFunction(m)?(m=m.call(this,d),m!==g&&this.setInternal(k,m)):"string"==typeof m?this.setInternal(k,d.one(m)):h.isArray(m)&&m[0]&&this.setInternal(k,d.all(m[0]))}this.setInternal("srcNode",e)}},create:function(){this.get("created")||(this.fire("beforeCreateDom"),this.callMethodByHierarchy("createDom","__createDom"),this.setInternal("created",!0),this.fire("afterCreateDom"),this.callPluginsMethod("createDom"));return this},render:function(){this.get("rendered")||
(this.create(g),this.fire("beforeRenderUI"),this.callMethodByHierarchy("renderUI","__renderUI"),this.fire("afterRenderUI"),this.callPluginsMethod("renderUI"),this.fire("beforeBindUI"),a.superclass.bindInternal.call(this),this.callMethodByHierarchy("bindUI","__bindUI"),this.fire("afterBindUI"),this.callPluginsMethod("bindUI"),a.superclass.syncInternal.call(this),this.sync(),this.setInternal("rendered",!0));return this},sync:function(){this.fire("beforeSyncUI");this.callMethodByHierarchy("syncUI","__syncUI");
this.fire("afterSyncUI");this.callPluginsMethod("syncUI")},createDom:d,renderUI:d,bindUI:d,syncUI:d,plug:function(){var b;b=this.get("plugins");a.superclass.plug.apply(this,arguments);b=b[b.length-1];this.get("rendered")?(b.pluginCreateDom&&b.pluginCreateDom(this),b.pluginRenderUI&&b.pluginRenderUI(this),b.pluginBindUI&&b.pluginBindUI(this),b.pluginSyncUI&&b.pluginSyncUI(this)):this.get("created")&&b.pluginCreateDom&&b.pluginCreateDom(this);return this},destructor:function(){var a;(a=this.get("id"))&&
b.removeComponent(a)}},{name:"UIBase",ATTRS:{rendered:{value:!1},created:{value:!1},xclass:{valueFn:function(){return b.getXClassByConstructor(this.constructor)}}}}),e=a.extend;h.mix(a,{HTML_PARSER:{},extend:function p(a,d,g){var k=h.makeArray(arguments),j={},l,o=k.length,n=k[o-1];if(l=n.xclass)k[o-2].name=l;k=e.apply(this,k);h.isArray(a)&&(h.each(a.concat(k),function(a){a&&h.each(a.HTML_PARSER,function(a,b){j[b]=a})}),k.HTML_PARSER=j);l&&b.setConstructorByXClass(l,{constructor:k,priority:n.priority});
k.extend=p;return k}});return a},{requires:["rich-base","node","./manager"]});
