/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: May 14 10:27
*/
KISSY.add("component/base",function(f,g,e,b,d,a,c,h){f.mix(g,{Controller:e,Render:b,Container:d,DelegateChildren:a,DecorateChild:h,DecorateChildren:c});return g},{requires:"./base/impl,./base/controller,./base/render,./base/container,./base/delegate-children,./base/decorate-children,./base/decorate-child".split(",")});
KISSY.add("component/base/box-render",function(f,g,e,b){function d(){if(!this.get("srcNode")){var a=this.getAttrs(),b,h=this.get("renderData");for(b in a)"renderData"!=b&&!(b in h)&&(h[b]=this.get(b))}}var a=f.all,c=f.UA,h=f.Env.host.document;d.ATTRS={id:{},el:{},elCls:{sync:0,setter:function(a){"string"==typeof a&&(a=a.split(/\s+/));return a}},elStyle:{sync:0},width:{sync:0},height:{sync:0},elAttrs:{sync:0},elBefore:{sync:0},render:{},visible:{sync:0},contentTpl:{value:"{{{content}}}"},renderData:{},
childrenElSelectors:{value:{}}};d.HTML_PARSER={content:function(a){return a.html()}};d.prototype={__createDom:function(){var m=this,h=m.get("renderData"),c;if(c=m.get("srcNode")){if((c=a(c))&&!c[0].id)c[0].id="ks-component"+f.guid()}else{c=b+m.get("contentTpl")+"</div>";c=(new e(c,{commands:{getCssClassWithState:function(a,b){return m.getCssClassWithState(b.params[0])}}})).render(h);c=a(c);var h=m.get("childrenElSelectors"),d;for(d in h){var l=h[d];"function"===typeof l?m.setInternal(d,l(c)):m.setInternal(d,
c.all(f.substitute(l,this.get("renderData"))))}}m.setInternal("el",c)},__renderUI:function(){if(!this.get("srcNode")){var a=this.get("render"),b=this.get("el"),c=this.get("elBefore");c?b.insertBefore(c,void 0):a?b.appendTo(a,void 0):b.appendTo(h.body,void 0)}},_onSetWidth:function(a){this.get("el").width(a)},_onSetHeight:function(a){this.get("el").height(a)},_onSetContent:function(a){var b=this.get("el");b.html(a);9>c.ie&&!this.get("allowTextSelection")&&b.unselectable(void 0)},_onSetVisible:function(a){var b=
this.get("el"),c=this.getCssClassWithState("shown"),h=this.getCssClassWithState("hidden");a?(b.removeClass(h),b.addClass(c)):(b.removeClass(c),b.addClass(h))},__destructor:function(){var a=this.get("el");a&&a.remove()}};return d},{requires:["node","xtemplate","./box-tpl"]});KISSY.add("component/base/box-tpl",function(){return'<div id="ks-component{{id}}"   class="{{getCssClassWithState ""}}  {{#if visible}}  {{getCssClassWithState "shown"}}   {{else}}  {{getCssClassWithState "hidden"}}   {{/if}}   {{#if elCls}}  {{#each elCls}}   {{.}}   {{/each}}  {{/if}} "  {{#if elAttrs}}  {{#each elAttrs}}   {{xkey}}="{{.}}"   {{/each}}   {{/if}}   style="  {{#if elStyle}} {{#each elStyle}}   {{xkey}}:{{.}};   {{/each}}  {{/if}}    {{#if width}}  width:{{width}};  {{/if}}   {{#if height}}  height:{{height}};  {{/if}}  ">'});
KISSY.add("component/base/box",function(f){function g(){}function e(b){"number"==typeof b&&(b+="px");return b}g.ATTRS={id:{view:1,valueFn:function(){return f.guid()}},content:{view:1,value:""},contentTpl:{view:1},renderData:{view:1,value:{}},childrenElSelectors:{view:1},width:{view:1,setter:e},height:{view:1,setter:e},elCls:{view:1,value:[]},elStyle:{view:1,value:{}},elAttrs:{view:1,value:{}},elBefore:{view:1},el:{view:1},render:{view:1},visible:{sync:0,value:!0,view:1},srcNode:{view:1}};g.prototype=
{_onSetVisible:function(b){this.fire(b?"show":"hide")},show:function(){this.render();this.set("visible",!0);return this},hide:function(){this.set("visible",!1);return this}};return g});KISSY.add("component/base/container",function(f,g,e,b){return g.extend([e,b])},{requires:["./controller","./delegate-children","./decorate-children"]});
KISSY.add("component/base/controller",function(f,g,e,b,d,a,c,h){function m(i){return function(a){this==a.target&&(a=a.newVal,this.get("view").set(i,a))}}function s(i){return function(a){var b=this.get("view");return a===h?b.get(i):a}}function t(i){if(i.target===this){var a=i.component,b=this.get("children"),i=i.index;b.splice(i,0,a);this.get("rendered")&&(a=this.renderChild(a,i));this.fire("afterAddChild",{component:a,index:i})}}function o(i){if(i.target===this){var a=i.component,b,c,h=i.destroy,
f=this.get("children"),i=i.index;-1!=i&&f.splice(i,1);a.setInternal&&a.setInternal("parent",null);if(h)a.destroy&&a.destroy();else if(a.get&&(b=a.get("el")))b=b[0],(c=b.parentNode)&&c.removeChild(b);this.fire("afterRemoveChild",{component:a,index:i})}}function l(i){var b,c,d,e={},l,g=i.get("xrender");b=i.getAttrs();for(d in b)if(c=b[d],c.view){if((l=i.get(d))!==h)e[d]=l;i.on("after"+f.ucfirst(d)+"Change",m(d));c.getter=s(d)}i=i.constructor;for(c=[];i&&i!=r;)(b=a.getXClassByConstructor(i))&&c.push(b),
i=i.superclass&&i.superclass.constructor;e.ksComponentCss=c;return new g(e)}function j(a,b){var c=a.relatedTarget;return c&&(c===b[0]||b.contains(c))}function k(a,b){return function(c){if(!a.get("disabled"))a[b](c)}}var p=f.Env.host.document.documentMode||f.UA.ie,n=e.Gesture,q=f.Features.isTouchSupported(),r=d.extend([g],{isController:!0,getCssClassWithPrefix:a.getCssClassWithPrefix,initializer:function(){var a=this.get("defaultChildCfg");this.publish("beforeAddChild",{defaultFn:t});this.publish("beforeRemoveChild",
{defaultFn:o});a.prefixCls=a.prefixCls||this.get("prefixCls")},createDom:function(){var a;this.setInternal("view",a=l(this));a.create();a=a.getKeyEventTarget();this.get("allowTextSelection")||a.unselectable(h)},renderUI:function(){this.get("view").render();this.renderChildren()},bindUI:function(){var a=this.getKeyEventTarget();if(this.get("focusable"))a.on("focus",k(this,"handleFocus")).on("blur",k(this,"handleBlur")).on("keydown",k(this,"handleKeydown"));if(this.get("handleMouseEvents")){a=this.get("el");
if(!q)a.on("mouseenter",k(this,"handleMouseEnter")).on("mouseleave",k(this,"handleMouseLeave")).on("contextmenu",k(this,"handleContextMenu"));a.on(n.start,k(this,"handleMouseDown")).on(n.end,k(this,"handleMouseUp")).on("touchcancel",k(this,"handleMouseUp")).on(n.tap,k(this,"performActionInternal"));if(p&&9>p)a.on("dblclick",k(this,"handleDblClick"))}},renderChildren:function(){var a,b=this.get("children");for(a=0;a<b.length;a++)this.renderChild(b[a],a)},_onSetFocused:function(a){var b=this.getKeyEventTarget()[0];
a?b.focus():b.ownerDocument.body.focus()},focus:function(){this.get("focusable")&&this.set("focused",!0)},blur:function(){this.get("focusable")&&this.set("focused",!1)},getChildrenContainerEl:function(){return this.get("view").getChildrenContainerEl()},getKeyEventTarget:function(){return this.get("view").getKeyEventTarget()},addChild:function(a,c){var d=this.get("children");c===h&&(c=d.length);a=b.create(a,this);this.fire("beforeAddChild",{component:a,index:c});return a},renderChild:function(a,c){var h,
d;h=this.get("children");var e;"undefined"===typeof c&&(c=f.indexOf(a,h));a=b.create(a,this);h[c]=a;this.create();e=this.getChildrenContainerEl();d=e[0];h=d.children[c]||null;a.get("rendered")?(e=a.get("el")[0],e.parentNode!=d&&d.insertBefore(e,h)):(h?a.set("elBefore",h):a.set("render",e),a.render());return a},removeChild:function(a,b){b===h&&(b=!0);this.fire("beforeRemoveChild",{component:a,index:f.indexOf(a,this.get("children")),destroy:b})},removeChildren:function(a){var b,c=[].concat(this.get("children"));
for(b=0;b<c.length;b++)this.removeChild(c[b],a);return this},getChildAt:function(a){return this.get("children")[a]||null},handleDblClick:function(a){this.performActionInternal(a)},handleMouseOver:function(a){var b=this.get("el");j(a,b)||this.handleMouseEnter(a)},handleMouseOut:function(a){var b=this.get("el");j(a,b)||this.handleMouseLeave(a)},handleMouseEnter:function(a){this.set("highlighted",!!a)},handleMouseLeave:function(a){this.set("active",!1);this.set("highlighted",!a)},handleMouseDown:function(a){var b;
if(1==a.which||q)if(b=this.getKeyEventTarget(),this.get("activeable")&&this.set("active",!0),this.get("focusable")&&(b[0].focus(),this.set("focused",!0)),!this.get("allowTextSelection"))b=(b=a.target.nodeName)&&b.toLowerCase(),"input"!=b&&"textarea"!=b&&a.preventDefault()},handleMouseUp:function(a){this.get("active")&&(1==a.which||q)&&this.set("active",!1)},handleContextMenu:function(){},handleFocus:function(a){this.set("focused",!!a);this.fire("focus")},handleBlur:function(a){this.set("focused",
!a);this.fire("blur")},handleKeyEventInternal:function(a){return a.keyCode==e.KeyCodes.ENTER?this.performActionInternal(a):h},handleKeydown:function(a){return this.handleKeyEventInternal(a)?(a.halt(),!0):h},performActionInternal:function(){},destructor:function(){var a,b=this.get("view"),c=this.get("children");for(a=0;a<c.length;a++)c[a].destroy&&c[a].destroy();b&&b.destroy()}},{ATTRS:{handleMouseEvents:{value:!0},focusable:{value:!0,view:1},allowTextSelection:{view:1,value:!1},activeable:{value:!0},
focused:{view:1,sync:0},active:{view:1,value:!1},highlighted:{view:1,sync:0,value:!1},children:{value:[]},prefixCls:{value:f.config("component/prefixCls")||"ks-",view:1},prefixXClass:{},parent:{setter:function(a,b){(b=this.get("parent"))&&this.removeTarget(b);a&&this.addTarget(a)}},disabled:{view:1,value:!1},xrender:{value:c},defaultChildCfg:{value:{}}}},{xclass:"controller"});return r},{requires:"./box,event,./impl,./uibase,./manager,./render".split(",")});
KISSY.add("component/base/decorate-child",function(f,g){function e(){}f.augment(e,g,{decorateInternal:function(b){this.set("el",b);var d=this.get("defaultChildCfg").prefixCls;if(b=b.one("."+(d+this.get("decorateChildCls"))))(d=this.findChildConstructorFromNode(d,b))?this.decorateChildrenInternal(d,b):this.decorateChildren(b)}});return e},{requires:["./decorate-children"]});
KISSY.add("component/base/decorate-children",function(f,g){function e(){}f.augment(e,{decorateInternal:function(b){this.set("el",b);this.decorateChildren(b)},findChildConstructorFromNode:function(b,d){var a=d[0].className||"";return a?(a=a.replace(RegExp("\\b"+b,"ig"),""),g.getConstructorByXClass(a)):null},decorateChildrenInternal:function(b,d,a){a=f.merge(this.get("defaultChildCfg"),a,{srcNode:d});delete a.xclass;return this.addChild(new b(a))},decorateChildren:function(b){var d=this,a=d.get("defaultChildCfg").prefixCls,
c=d.get("defaultChildCfg").xclass;b.children().each(function(b){var e=d.findChildConstructorFromNode(a,b)||c&&g.getConstructorByXClass(c);d.decorateChildrenInternal(e,b)})}});return e},{requires:["./manager"]});
KISSY.add("component/base/delegate-children",function(f,g){function e(){}function b(a){if(!this.get("disabled")){var b=this.getOwnerControl(a.target,a);if(b&&!b.get("disabled"))switch(a.type){case c.start:b.handleMouseDown(a);break;case c.end:b.handleMouseUp(a);break;case c.tap:b.performActionInternal(a);break;case "mouseover":b.handleMouseOver(a);break;case "mouseout":b.handleMouseOut(a);break;case "contextmenu":b.handleContextMenu(a);break;case "dblclick":b.handleDblClick(a)}}}var d=f.UA,a=f.Env.host.document.documentMode||
d.ie,c=g.Gesture,h=f.Features.isTouchSupported();e.ATTRS={delegateChildren:{value:!0}};f.augment(e,{__bindUI:function(){var d;this.get("delegateChildren")&&(d=c.start+" "+c.end+" "+c.tap+" touchcancel ",h||(d+="mouseover mouseout contextmenu "+(a&&9>a?"dblclick ":"")),this.get("el").on(d,b,this))},getOwnerControl:function(a){for(var b=this.get("children"),c=b.length,h=this.get("el")[0];a&&a!==h;){for(var d=0;d<c;d++)if(b[d].get("el")[0]===a)return b[d];a=a.parentNode}return null}});return e},{requires:["event"]});
KISSY.add("component/base/impl",function(f,g,e){return{Manager:e,UIBase:g,create:function(b,d){var a;if(b){!b.isController&&d&&(f.mix(b,d.get("defaultChildCfg"),!1),!b.xclass&&b.prefixXClass&&(b.xclass=b.prefixXClass,b.xtype&&(b.xclass+="-"+b.xtype)));if(!b.isController&&(a=b.xclass))a=e.getConstructorByXClass(a),b=new a(b);b.isController&&d&&b.setInternal("parent",d)}return b}}},{requires:["./uibase","./manager"]});
KISSY.add("component/base/manager",function(f){function g(a){for(var a=f.trim(a).split(/\s+/),b=0;b<a.length;b++)a[b]&&(a[b]=this.get("prefixCls")+a[b]);return a.join(" ")}var e={},b={},d={__instances:b,addComponent:function(a,c){b[a]=c},removeComponent:function(a){delete b[a]},getComponent:function(a){return b[a]},getCssClassWithPrefix:g,getXClassByConstructor:function(a){for(var b in e)if(e[b].constructor==a)return b;return 0},getConstructorByXClass:function(a){for(var a=a.split(/\s+/),b=-1,h,d=
null,f=0;f<a.length;f++){var g=e[a[f]];if(g&&(h=g.priority)>b)b=h,d=g.constructor}return d},setConstructorByXClass:function(a,b){f.isFunction(b)?e[a]={constructor:b,priority:0}:(b.priority=b.priority||0,e[a]=b)}};d.getCssClassWithPrefix=g;return d});
KISSY.add("component/base/render",function(f,g,e,b,d){return b.extend([g],{initializer:function(){var a=this.get("elAttrs"),b=this.get("elCls"),h;if(h=this.get("disabled"))b.push(this.getCssClassWithState("disabled")),a["aria-disabled"]="true";this.get("highlighted")&&b.push(this.getCssClassWithState("hover"));this.get("focusable")&&(a.hideFocus="true",a.tabindex=h?"-1":"0")},isRender:1,getCssClassWithState:function(a){var b=this.get("ksComponentCss");if(!b)return"";(a=a||"")&&(a="-"+a);return this.getCssClassWithPrefix(b.join(a+
" ")+a)},getCssClassWithPrefix:d.getCssClassWithPrefix,getKeyEventTarget:function(){return this.get("el")},_onSetHighlighted:function(a){var b=this.getCssClassWithState("hover");this.get("el")[a?"addClass":"removeClass"](b)},_onSetDisabled:function(a){var b=this.getCssClassWithState("disabled");this.get("el")[a?"addClass":"removeClass"](b).attr("aria-disabled",a);this.get("focusable")&&this.getKeyEventTarget().attr("tabIndex",a?-1:0)},_onSetActive:function(a){var b=this.getCssClassWithState("active");
this.get("el")[a?"addClass":"removeClass"](b).attr("aria-pressed",!!a)},_onSetFocused:function(a){var b=this.get("el"),h=this.getCssClassWithState("focused");b[a?"addClass":"removeClass"](h)},getChildrenContainerEl:function(){return this.get("el")}},{ATTRS:{prefixCls:{},focusable:{},focused:{sync:0},active:{sync:0},disabled:{sync:0},highlighted:{sync:0}},HTML_PARSER:{disabled:function(){var a=this.getCssClassWithState("disabled");return this.get("el").hasClass(a)}}})},{requires:["./box-render","./impl",
"./uibase","./manager"]});
KISSY.add("component/base/uibase",function(f,g,e,b,d){var e=f.noop,a=g.extend({constructor:function(){var b;a.superclass.constructor.apply(this,arguments);this.decorateInternal&&(b=this.get("srcNode"))&&this.decorateInternal(b);this.get("autoRender")&&this.render()},bindInternal:e,syncInternal:e,initializer:function(){var a,c=f.one(this.get("srcNode"));(a=this.get("id"))&&b.addComponent(a,this);if(c){var e=this.constructor,g,o;o=this.collectConstructorChains();for(a=o.length-1;0<=a;a--)if(e=o[a],
g=e.HTML_PARSER){var e=c,l=void 0,j=void 0,j=void 0,k=this.userConfig||{};for(l in g)l in k||(j=g[l],f.isFunction(j)?(j=j.call(this,e),j!==d&&this.setInternal(l,j)):"string"==typeof j?this.setInternal(l,e.one(j)):f.isArray(j)&&j[0]&&this.setInternal(l,e.all(j[0])))}this.setInternal("srcNode",c)}},create:function(){this.get("created")||(this.fire("beforeCreateDom"),this.callMethodByHierarchy("createDom","__createDom"),this.setInternal("created",!0),this.fire("afterCreateDom"),this.callPluginsMethod("createDom"));
return this},render:function(){this.get("rendered")||(this.create(d),this.fire("beforeRenderUI"),this.callMethodByHierarchy("renderUI","__renderUI"),this.fire("afterRenderUI"),this.callPluginsMethod("renderUI"),this.fire("beforeBindUI"),a.superclass.bindInternal.call(this),this.callMethodByHierarchy("bindUI","__bindUI"),this.fire("afterBindUI"),this.callPluginsMethod("bindUI"),a.superclass.syncInternal.call(this),this.sync(),this.setInternal("rendered",!0));return this},sync:function(){this.fire("beforeSyncUI");
this.callMethodByHierarchy("syncUI","__syncUI");this.fire("afterSyncUI");this.callPluginsMethod("syncUI")},createDom:e,renderUI:e,bindUI:e,syncUI:e,plug:function(){var b;b=this.get("plugins");a.superclass.plug.apply(this,arguments);b=b[b.length-1];this.get("rendered")?(b.pluginCreateDom&&b.pluginCreateDom(this),b.pluginRenderUI&&b.pluginRenderUI(this),b.pluginBindUI&&b.pluginBindUI(this),b.pluginSyncUI&&b.pluginSyncUI(this)):this.get("created")&&b.pluginCreateDom&&b.pluginCreateDom(this);return this},
destructor:function(){var a;(a=this.get("id"))&&b.removeComponent(a)}},{name:"UIBase",ATTRS:{rendered:{value:!1},created:{value:!1},xclass:{valueFn:function(){return b.getXClassByConstructor(this.constructor)}}}}),c=a.extend;f.mix(a,{HTML_PARSER:{},extend:function m(a,d,e){var g=f.makeArray(arguments),j={},k,p=g.length,n=g[p-1];if(k=n.xclass)g[p-2].name=k;g=c.apply(this,g);f.isArray(a)&&(f.each(a.concat(g),function(a){a&&f.each(a.HTML_PARSER,function(a,b){j[b]=a})}),g.HTML_PARSER=j);k&&b.setConstructorByXClass(k,
{constructor:g,priority:n.priority});g.extend=m;return g}});return a},{requires:["rich-base","node","./manager"]});
