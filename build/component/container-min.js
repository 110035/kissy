/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jun 19 14:00
*/
KISSY.add("component/container",function(f,g,h,i){function j(a){if(a.target===this){var b=a.component,c=this.get("children"),a=a.index;c.splice(a,0,b);this.get("rendered")&&(b=this.renderChild(b,a));this.fire("afterAddChild",{component:b,index:a})}}function k(a){if(a.target===this){var b=a.component,c,e,d=a.destroy,f=this.get("children"),a=a.index;-1!=a&&f.splice(a,1);b.setInternal&&b.setInternal("parent",null);if(d)b.destroy&&b.destroy();else if(b.get&&(c=b.get("el")))c=c[0],(e=c.parentNode)&&e.removeChild(c);
this.fire("afterRemoveChild",{component:b,index:a})}}return g.extend({isContainer:!0,initializer:function(){var a=this.prefixCls,b=this.get("defaultChildCfg");this.publish("beforeAddChild",{defaultFn:j});this.publish("beforeRemoveChild",{defaultFn:k});b.prefixCls=b.prefixCls||a},createDom:function(){this.createChildren()},renderUI:function(){this.renderChildren()},renderChildren:function(){var a,b=this.get("children");for(a=0;a<b.length;a++)this.renderChild(b[a],a)},createChildren:function(){var a,
b=this.get("children");for(a=0;a<b.length;a++)this.createChild(b[a],a)},addChild:function(a,b){var c=this.get("children");void 0===b&&(b=c.length);a=this.createChild(a);this.fire("beforeAddChild",{component:a,index:b});return a},renderChild:function(a,b){var c=this.get("children");"undefined"===typeof b&&(b=f.indexOf(a,c));a&&a.get&&a.get("created")?a.render():a=this.createChild(a,b).render();this.fire("afterRenderChild",{component:a,index:b})},createChild:function(a,b){var c,e;c=this.get("children");
var d;"undefined"===typeof b&&(b=f.indexOf(a,c));a=h.createComponent(a,this);c[b]=a;d=this.view.getChildrenContainerEl();e=d[0];c=e.children[b]||null;a.get("rendered")?(d=a.get("el")[0],d.parentNode!=e&&e.insertBefore(d,c)):(c?a.set("elBefore",c):a.set("render",d),a.create());this.fire("afterCreateChild",{component:a,index:b});return a},removeChild:function(a,b){void 0===b&&(b=!0);this.fire("beforeRemoveChild",{component:a,index:f.indexOf(a,this.get("children")),destroy:b})},removeChildren:function(a){var b,
c=[].concat(this.get("children"));for(b=0;b<c.length;b++)this.removeChild(c[b],a);return this},getChildAt:function(a){return this.get("children")[a]||null},destructor:function(){var a,b=this.get("children");for(a=0;a<b.length;a++)b[a].destroy&&b[a].destroy()}},{ATTRS:{children:{value:[]},defaultChildCfg:{value:{}},xrender:{value:i}},name:"container"})},{requires:["component/controller","component/manager","./container/container-render"]});
