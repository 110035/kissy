/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jun 5 17:04
*/
KISSY.add("component/extension/align",function(c,a,i){function e(b){var o=b.ownerDocument.body,c=a.css(b,"position");if(!("fixed"==c||"absolute"==c))return"html"==b.nodeName.toLowerCase()?null:b.parentNode;for(b=b.parentNode;b&&b!=o;b=b.parentNode)if(c=a.css(b,"position"),"static"!=c)return b;return null}function p(b){var o,c,d={left:0,right:Infinity,top:0,bottom:Infinity},g;c=b.ownerDocument;o=c.body;for(c=c.documentElement;b=e(b);)if((!q.ie||0!=b.clientWidth)&&b!=o&&b!=c&&"visible"!=a.css(b,"overflow"))g=
a.offset(b),g.left+=b.clientLeft,g.top+=b.clientTop,d.top=Math.max(d.top,g.top),d.right=Math.min(d.right,g.left+b.clientWidth),d.bottom=Math.min(d.bottom,g.top+b.clientHeight),d.left=Math.max(d.left,g.left);b=a.scrollLeft();g=a.scrollTop();d.left=Math.max(d.left,b);d.top=Math.max(d.top,g);o=a.viewportWidth();c=a.viewportHeight();d.right=Math.min(d.right,b+o);d.bottom=Math.min(d.bottom,g+c);return 0<=d.top&&0<=d.left&&d.bottom>d.top&&d.right>d.left?d:null}function n(b,c,g,d){var a,i;a=b.left;i=b.top;
c=k(c,g[0]);b=k(b,g[1]);b=[b.left-c.left,b.top-c.top];return{left:a-b[0]+ +d[0],top:i-b[1]+ +d[1]}}function h(b,g,a){var d=[];c.each(b,function(b){d.push(b.replace(g,function(b){return a[b]}))});return d}function l(){}function g(b){var g,i;c.isWindow(b[0])?(g={left:a.scrollLeft(),top:a.scrollTop()},i=a.viewportWidth(),b=a.viewportHeight()):(g=b.offset(),i=b.outerWidth(),b=b.outerHeight());g.width=i;g.height=b;return g}function k(b,g){var c=g.charAt(0),d=g.charAt(1),a=b.width,i=b.height,f,e;f=b.left;
e=b.top;"c"===c?e+=i/2:"b"===c&&(e+=i);"c"===d?f+=a/2:"r"===d&&(f+=a);return{left:f,top:e}}var r=c.Env.host,q=c.UA;l.__getOffsetParent=e;l.__getVisibleRectForElement=p;l.ATTRS={align:{value:{}}};l.prototype={_onSetAlign:function(b){b&&b.points&&this.align(b.node,b.points,b.offset,b.overflow)},align:function(b,a,e,d){var b=i.one(b||r),e=e&&[].concat(e)||[0,0],d=d||{},k=this.get("el"),l=0,f=p(k[0]),j=g(k),q=g(b),m=n(j,q,a,e),b=c.merge(j,m);if(f&&(d.adjustX||d.adjustY)){if(m.left<f.left||m.left+j.width>
f.right)l=1,a=h(a,/[lr]/ig,{l:"r",r:"l"}),e[0]=-e[0];if(m.top<f.top||m.top+j.height>f.bottom)l=1,a=h(a,/[tb]/ig,{t:"b",b:"t"}),e[1]=-e[1];l&&(m=n(j,q,a,e),c.mix(b,m));a={};a.adjustX=d.adjustX&&(m.left<f.left||m.left+j.width>f.right);a.adjustY=d.adjustY&&(m.top<f.top||m.top+j.height>f.bottom);if(a.adjustX||a.adjustY)d=c.clone(m),b={width:j.width,height:j.height},a.adjustX&&d.left<f.left&&(d.left=f.left),a.resizeWidth&&d.left>=f.left&&d.left+b.width>f.right&&(b.width-=d.left+b.width-f.right),a.adjustX&&
d.left+b.width>f.right&&(d.left=Math.max(f.right-b.width,f.left)),a.adjustY&&d.top<f.top&&(d.top=f.top),a.resizeHeight&&d.top>=f.top&&d.top+b.height>f.bottom&&(b.height-=d.top+b.height-f.bottom),a.adjustY&&d.top+b.height>f.bottom&&(d.top=Math.max(f.bottom-b.height,f.top)),b=c.mix(d,b)}f={};b.left!=j.left&&this.set("x",f.left=b.left);b.top!=j.top&&this.set("y",f.top=b.top);k.offset(f);b.width!=j.width&&k.width(k.width()+b.width-j.width);b.height!=j.height&&k.height(k.height()+b.height-j.height);return this},
center:function(b){this.set("align",{node:b,points:["cc","cc"],offset:[0,0]});return this}};return l},{requires:["dom","node"]});
KISSY.add("component/extension/content-render",function(c){function a(){c.mix(this.get("childrenElSelectors"),{contentEl:"#ks-content{id}"})}a.prototype={getChildrenContainerEl:function(){return this.get("contentEl")},_onSetContent:function(a){var e=this.get("contentEl");e.html(a);9>c.UA.ie&&!this.get("allowTextSelection")&&e.unselectable()}};c.mix(a,{ATTRS:{contentTpl:{value:'<div id="ks-content{{id}}" class="{{getBaseCssClasses "content"}}">{{{content}}}</div>'},content:{sync:0}},HTML_PARSER:{content:function(a){return a.one("."+
this.getBaseCssClass("content")).html()},contentEl:function(a){return a.one("."+this.getBaseCssClass("content"))}}});a.ContentTpl=a.ATTRS.contentTpl.value;return a});
KISSY.add("component/extension/position",function(c){function a(){}a.ATTRS={x:{view:1},y:{view:1},xy:{setter:function(a){var e=c.makeArray(a);e.length&&(e[0]&&this.set("x",e[0]),e[1]&&this.set("y",e[1]));return a},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:1},visible:{value:!1}};a.prototype={move:function(a,e){c.isArray(a)&&(e=a[1],a=a[0]);this.set("xy",[a,e]);return this}};return a});
KISSY.add("component/extension/position-render",function(){function c(){var a=this.get("renderData");this.get("elStyle")["z-index"]=a.zIndex}c.ATTRS={x:{},y:{},zIndex:{sync:0}};c.prototype={_onSetZIndex:function(a){this.get("el").css("z-index",a)},_onSetX:function(a){this.get("el").offset({left:a})},_onSetY:function(a){this.get("el").offset({top:a})}};return c});
KISSY.add("component/extension/shim-render",function(){function c(){}c.prototype.__createDom=function(){this.get("el").prepend(S.all("<iframe style='position: absolute;border: none;width: expression(this.parentNode.clientWidth);top: 0;opacity: 0;filter: alpha(opacity=0);left: 0;z-index: -1;height: expression(this.parentNode.clientHeight);'/>"))};return c});
KISSY.add("component/extension/delegate-children",function(c,a){function i(){}function e(a){if(!this.get("disabled")){var c=this.getOwnerControl(a.target,a);if(c&&!c.get("disabled"))switch(a.type){case h.start:c.handleMouseDown(a);break;case h.end:c.handleMouseUp(a);break;case h.tap:c.performActionInternal(a);break;case "mouseover":c.handleMouseOver(a);break;case "mouseout":c.handleMouseOut(a);break;case "contextmenu":c.handleContextMenu(a);break;case "dblclick":c.handleDblClick(a)}}}var p=c.UA,n=
c.Env.host.document.documentMode||p.ie,h=a.Gesture,l=c.Features.isTouchEventSupported();c.augment(i,{__bindUI:function(){var a=h.start+" "+h.end+" "+h.tap;h.cancel&&(a+=" "+h.cancel);l||(a+=" mouseover mouseout contextmenu "+(n&&9>n?"dblclick ":""));this.get("el").on(a,e,this)},getOwnerControl:function(a){for(var c=this.get("children"),e=c.length,h=this.get("el")[0];a&&a!==h;){for(var b=0;b<e;b++)if(c[b].get("el")[0]===a)return c[b];a=a.parentNode}return null}});return i},{requires:["event"]});
KISSY.add("component/extension/decorate-children",function(c,a){function i(){}var e=a.Manager;c.augment(i,{decorateInternal:function(a){this.decorateChildren(a)},findChildConstructorFromNode:function(a,c){var h=c[0].className||"";return h?(h=h.replace(RegExp("\\b"+a,"ig"),""),e.getConstructorByXClass(h)):null},decorateChildrenInternal:function(a,e,h){h=c.merge(this.get("defaultChildCfg"),h,{srcNode:e});delete h.xclass;return this.addChild(new a(h))},decorateChildren:function(a){var c=this,h=c.get("defaultChildCfg").prefixCls,
i=c.get("defaultChildCfg").xclass;a.children().each(function(a){var k=c.findChildConstructorFromNode(h,a)||i&&e.getConstructorByXClass(i);k&&c.decorateChildrenInternal(k,a)})}});return i},{requires:["component/base"]});
KISSY.add("component/extension/decorate-child",function(c,a){function i(){}c.augment(i,a,{decorateInternal:function(a){var c=this.get("defaultChildCfg").prefixCls;if(a=a.one("."+this.get("decorateChildCls")))(c=this.findChildConstructorFromNode(c,a))?this.decorateChildrenInternal(c,a):this.decorateChildren(a)}});i.ATTRS={decorateChildCls:{valueFn:function(){return this.getBaseCssClass("content")}}};return i},{requires:["./decorate-children"]});
KISSY.add("component/extension",function(c,a,i,e,p,n,h,l,g){return{Align:a,Position:e,PositionRender:p,ContentRender:i,ShimRender:6===c.UA?n:null,DelegateChildren:h,DecorateChild:g,DecorateChildren:l}},{requires:"./extension/align,./extension/content-render,./extension/position,./extension/position-render,./extension/shim-render,./extension/delegate-children,./extension/decorate-children,./extension/decorate-child".split(",")});
