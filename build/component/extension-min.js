/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jun 5 22:25
*/
KISSY.add("component/extension/align",function(a,g){function c(b){var p=b.ownerDocument.body,a=n(b).css("position");if(!("fixed"==a||"absolute"==a))return"html"==b.nodeName.toLowerCase()?null:b.parentNode;for(b=b.parentNode;b&&b!=p;b=b.parentNode)if(a=n(b).css("position"),"static"!=a)return b;return null}function m(b){var p,a,e={left:0,right:Infinity,top:0,bottom:Infinity},d;a=b.ownerDocument;p=a.body;for(a=a.documentElement;b=c(b);)if((!s.ie||0!=b.clientWidth)&&b!=p&&b!=a&&"visible"!=n(b).css("overflow"))d=
n(b).offset(),d.left+=b.clientLeft,d.top+=b.clientTop,e.top=Math.max(e.top,d.top),e.right=Math.min(e.right,d.left+b.clientWidth),e.bottom=Math.min(e.bottom,d.top+b.clientHeight),e.left=Math.max(e.left,d.left);b=k.scrollLeft();d=k.scrollTop();e.left=Math.max(e.left,b);e.top=Math.max(e.top,d);p=k.width();a=k.height();e.right=Math.min(e.right,b+p);e.bottom=Math.min(e.bottom,d+a);return 0<=e.top&&0<=e.left&&e.bottom>e.top&&e.right>e.left?e:null}function j(b,a,c,e){var g,f;g=b.left;f=b.top;a=d(a,c[0]);
b=d(b,c[1]);b=[b.left-a.left,b.top-a.top];return{left:g-b[0]+ +e[0],top:f-b[1]+ +e[1]}}function o(b,d,c){var e=[];a.each(b,function(b){e.push(b.replace(d,function(b){return c[b]}))});return e}function f(){}function q(b){var d,c;a.isWindow(b[0])?(d={left:k.scrollLeft(),top:k.scrollTop()},c=k.width(),b=k.height()):(d=b.offset(),c=b.outerWidth(),b=b.outerHeight());d.width=c;d.height=b;return d}function d(b,a){var d=a.charAt(0),e=a.charAt(1),c=b.width,g=b.height,h,f;h=b.left;f=b.top;"c"===d?f+=g/2:"b"===
d&&(f+=g);"c"===e?h+=c/2:"r"===e&&(h+=c);return{left:h,top:f}}var r=a.Env.host,n=g.all,k=n(r),s=a.UA;f.__getOffsetParent=c;f.__getVisibleRectForElement=m;f.ATTRS={align:{value:{}}};f.prototype={_onSetAlign:function(b){b&&b.points&&this.align(b.node,b.points,b.offset,b.overflow)},align:function(b,d,c,e){var b=g.one(b||r),c=c&&[].concat(c)||[0,0],e=e||{},f=this.get("el"),k=0,h=m(f[0]),i=q(f),n=q(b),l=j(i,n,d,c),b=a.merge(i,l);if(h&&(e.adjustX||e.adjustY)){if(l.left<h.left||l.left+i.width>h.right)k=
1,d=o(d,/[lr]/ig,{l:"r",r:"l"}),c[0]=-c[0];if(l.top<h.top||l.top+i.height>h.bottom)k=1,d=o(d,/[tb]/ig,{t:"b",b:"t"}),c[1]=-c[1];k&&(l=j(i,n,d,c),a.mix(b,l));d={};d.adjustX=e.adjustX&&(l.left<h.left||l.left+i.width>h.right);d.adjustY=e.adjustY&&(l.top<h.top||l.top+i.height>h.bottom);if(d.adjustX||d.adjustY)e=a.clone(l),b={width:i.width,height:i.height},d.adjustX&&e.left<h.left&&(e.left=h.left),d.resizeWidth&&e.left>=h.left&&e.left+b.width>h.right&&(b.width-=e.left+b.width-h.right),d.adjustX&&e.left+
b.width>h.right&&(e.left=Math.max(h.right-b.width,h.left)),d.adjustY&&e.top<h.top&&(e.top=h.top),d.resizeHeight&&e.top>=h.top&&e.top+b.height>h.bottom&&(b.height-=e.top+b.height-h.bottom),d.adjustY&&e.top+b.height>h.bottom&&(e.top=Math.max(h.bottom-b.height,h.top)),b=a.mix(e,b)}h={};b.left!=i.left&&this.set("x",h.left=b.left);b.top!=i.top&&this.set("y",h.top=b.top);f.offset(h);b.width!=i.width&&f.width(f.width()+b.width-i.width);b.height!=i.height&&f.height(f.height()+b.height-i.height);return this},
center:function(b){this.set("align",{node:b,points:["cc","cc"],offset:[0,0]});return this}};return f},{requires:["node"]});
KISSY.add("component/extension/content-render",function(a){function g(){a.mix(this.get("childrenElSelectors"),{contentEl:"#ks-content{id}"})}g.prototype={getChildrenContainerEl:function(){return this.get("contentEl")},_onSetContent:function(c){var g=this.get("contentEl");g.html(c);9>a.UA.ie&&!this.get("allowTextSelection")&&g.unselectable()}};a.mix(g,{ATTRS:{contentTpl:{value:'<div id="ks-content{{id}}" class="{{getBaseCssClasses "content"}}">{{{content}}}</div>'},content:{sync:0}},HTML_PARSER:{content:function(a){return a.one("."+
this.getBaseCssClass("content")).html()},contentEl:function(a){return a.one("."+this.getBaseCssClass("content"))}}});g.ContentTpl=g.ATTRS.contentTpl.value;return g});
KISSY.add("component/extension/position",function(a){function g(){}g.ATTRS={x:{view:1},y:{view:1},xy:{setter:function(c){var g=a.makeArray(c);g.length&&(g[0]&&this.set("x",g[0]),g[1]&&this.set("y",g[1]));return c},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:1},visible:{value:!1}};g.prototype={move:function(c,g){a.isArray(c)&&(g=c[1],c=c[0]);this.set("xy",[c,g]);return this}};return g});
KISSY.add("component/extension/position-render",function(){function a(){var a=this.get("renderData");this.get("elStyle")["z-index"]=a.zIndex}a.ATTRS={x:{},y:{},zIndex:{sync:0}};a.prototype={_onSetZIndex:function(a){this.get("el").css("z-index",a)},_onSetX:function(a){this.get("el").offset({left:a})},_onSetY:function(a){this.get("el").offset({top:a})}};return a});
KISSY.add("component/extension/shim-render",function(){function a(){}a.prototype.__createDom=function(){this.get("el").prepend(S.all("<iframe style='position: absolute;border: none;width: expression(this.parentNode.clientWidth);top: 0;opacity: 0;filter: alpha(opacity=0);left: 0;z-index: -1;height: expression(this.parentNode.clientHeight);'/>"))};return a});
KISSY.add("component/extension/delegate-children",function(a,g){function c(){}function m(d){if(!this.get("disabled")){var a=this.getOwnerControl(d.target,d);if(a&&!a.get("disabled"))switch(d.type){case f.start:a.handleMouseDown(d);break;case f.end:a.handleMouseUp(d);break;case f.tap:a.performActionInternal(d);break;case "mouseover":a.handleMouseOver(d);break;case "mouseout":a.handleMouseOut(d);break;case "contextmenu":a.handleContextMenu(d);break;case "dblclick":a.handleDblClick(d)}}}var j=a.UA,o=
a.Env.host.document.documentMode||j.ie,f=g.Gesture,q=a.Features.isTouchEventSupported();a.augment(c,{__bindUI:function(){var a=f.start+" "+f.end+" "+f.tap;f.cancel&&(a+=" "+f.cancel);q||(a+=" mouseover mouseout contextmenu "+(o&&9>o?"dblclick ":""));this.get("el").on(a,m,this)},getOwnerControl:function(a){for(var c=this.get("children"),f=c.length,g=this.get("el")[0];a&&a!==g;){for(var j=0;j<f;j++)if(c[j].get("el")[0]===a)return c[j];a=a.parentNode}return null}});return c},{requires:["node"]});
KISSY.add("component/extension/decorate-children",function(a,g){function c(){}var m=g.Manager;a.augment(c,{decorateInternal:function(a){this.decorateChildren(a)},findChildConstructorFromNode:function(a,c){var f=c[0].className||"";return f?(f=f.replace(RegExp("\\b"+a,"ig"),""),m.getConstructorByXClass(f)):null},decorateChildrenInternal:function(c,g,f){f=a.merge(this.get("defaultChildCfg"),f,{srcNode:g});delete f.xclass;return this.addChild(new c(f))},decorateChildren:function(a){var c=this,f=c.get("defaultChildCfg").prefixCls,
g=c.get("defaultChildCfg").xclass;a.children().each(function(a){var j=c.findChildConstructorFromNode(f,a)||g&&m.getConstructorByXClass(g);j&&c.decorateChildrenInternal(j,a)})}});return c},{requires:["component/base"]});
KISSY.add("component/extension/decorate-child",function(a,g){function c(){}a.augment(c,g,{decorateInternal:function(a){var c=this.get("defaultChildCfg").prefixCls;if(a=a.one("."+this.get("decorateChildCls")))(c=this.findChildConstructorFromNode(c,a))?this.decorateChildrenInternal(c,a):this.decorateChildren(a)}});c.ATTRS={decorateChildCls:{valueFn:function(){return this.getBaseCssClass("content")}}};return c},{requires:["./decorate-children"]});
KISSY.add("component/extension",function(a,g,c,m,j,o,f,q,d){return{Align:g,Position:m,PositionRender:j,ContentRender:c,ShimRender:6===a.UA?o:null,DelegateChildren:f,DecorateChild:d,DecorateChildren:q}},{requires:"./extension/align,./extension/content-render,./extension/position,./extension/position-render,./extension/shim-render,./extension/delegate-children,./extension/decorate-children,./extension/decorate-child".split(",")});
