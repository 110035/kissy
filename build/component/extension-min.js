/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: May 14 10:27
*/
KISSY.add("component/extension/align",function(i,c,n){function k(a){var d=a.ownerDocument.body,f=c.css(a,"position");if(!("fixed"==f||"absolute"==f))return"html"==a.nodeName.toLowerCase()?null:a.parentNode;for(a=a.parentNode;a&&a!=d;a=a.parentNode)if(f=c.css(a,"position"),"static"!=f)return a;return null}function o(a){var d,f,b={left:0,right:Infinity,top:0,bottom:Infinity},j;f=a.ownerDocument;d=f.body;for(f=f.documentElement;a=k(a);)if((!t.ie||0!=a.clientWidth)&&a!=d&&a!=f&&"visible"!=c.css(a,"overflow"))j=
c.offset(a),j.left+=a.clientLeft,j.top+=a.clientTop,b.top=Math.max(b.top,j.top),b.right=Math.min(b.right,j.left+a.clientWidth),b.bottom=Math.min(b.bottom,j.top+a.clientHeight),b.left=Math.max(b.left,j.left);a=c.scrollLeft();j=c.scrollTop();b.left=Math.max(b.left,a);b.top=Math.max(b.top,j);d=c.viewportWidth();f=c.viewportHeight();b.right=Math.min(b.right,a+d);b.bottom=Math.min(b.bottom,j+f);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null}function p(a,d,f,b){var c,g;c=a.left;g=a.top;
d=q(d,f[0]);a=q(a,f[1]);a=[a.left-d.left,a.top-d.top];return{left:c-a[0]+ +b[0],top:g-a[1]+ +b[1]}}function r(a,d,f){var b=[];i.each(a,function(a){b.push(a.replace(d,function(a){return f[a]}))});return b}function m(){}function s(a){var d,f;i.isWindow(a[0])?(d={left:c.scrollLeft(),top:c.scrollTop()},f=c.viewportWidth(),a=c.viewportHeight()):(d=a.offset(),f=a.outerWidth(),a=a.outerHeight());d.width=f;d.height=a;return d}function q(a,d){var f=d.charAt(0),b=d.charAt(1),c=a.width,g=a.height,e,h;e=a.left;
h=a.top;"c"===f?h+=g/2:"b"===f&&(h+=g);"c"===b?e+=c/2:"r"===b&&(e+=c);return{left:e,top:h}}var u=i.Env.host,t=i.UA;m.__getOffsetParent=k;m.__getVisibleRectForElement=o;m.ATTRS={align:{value:{}}};m.prototype={_onSetAlign:function(a){a&&a.points&&this.align(a.node,a.points,a.offset,a.overflow)},align:function(a,d,c,b){var a=n.one(a||u),c=c&&[].concat(c)||[0,0],b=b||{},j=this.get("el"),g=0,e=o(j[0]),h=s(j),k=s(a),a=p(h,k,d,c),l=i.merge(h,a);if(e&&(b.adjustX||b.adjustY)){if(a.left<e.left||a.left+h.width>
e.right)g=1,d=r(d,/[lr]/ig,{l:"r",r:"l"}),c[0]=-c[0];if(a.top<e.top||a.top+h.height>e.bottom)g=1,d=r(d,/[tb]/ig,{t:"b",b:"t"}),c[1]=-c[1];g&&(a=p(h,k,d,c),i.mix(l,a));d={};d.adjustX=b.adjustX&&(a.left<e.left||a.left+h.width>e.right);d.adjustY=b.adjustY&&(a.top<e.top||a.top+h.height>e.bottom);if(d.adjustX||d.adjustY)b=i.clone(a),g={width:h.width,height:h.height},d.adjustX&&b.left<e.left&&(b.left=e.left),d.resizeWidth&&b.left>=e.left&&b.left+g.width>e.right&&(g.width-=b.left+g.width-e.right),d.adjustX&&
b.left+g.width>e.right&&(b.left=Math.max(e.right-g.width,e.left)),d.adjustY&&b.top<e.top&&(b.top=e.top),d.resizeHeight&&b.top>=e.top&&b.top+g.height>e.bottom&&(g.height-=b.top+g.height-e.bottom),d.adjustY&&b.top+g.height>e.bottom&&(b.top=Math.max(e.bottom-g.height,e.top)),l=i.mix(b,g)}l.left!=h.left&&(this.setInternal("x",null),this.get("view").setInternal("x",null),this.set("x",l.left));l.top!=h.top&&(this.setInternal("y",null),this.get("view").setInternal("y",null),this.set("y",l.top));l.width!=
h.width&&j.width(j.width()+l.width-h.width);l.height!=h.height&&j.height(j.height()+l.height-h.height);return this},center:function(a){this.set("align",{node:a,points:["cc","cc"],offset:[0,0]});return this}};return m},{requires:["dom","node"]});KISSY.add("component/extension",function(i,c,n,k,o){n.Render=k;return{Align:c,Position:n,Shim:{Render:o}}},{requires:["./extension/align","./extension/position","./extension/position-render","./extension/shim-render"]});
KISSY.add("component/extension/position-render",function(){function i(){var c=this.get("renderData");this.get("elStyle")["z-index"]=c.zIndex;this.get("elCls").push(c.prefixCls+"ext-position ")}i.ATTRS={x:{},y:{},zIndex:{sync:0}};i.prototype={_onSetZIndex:function(c){this.get("el").css("z-index",c)},_onSetX:function(c){null!=c&&this.get("el").offset({left:c})},_onSetY:function(c){null!=c&&this.get("el").offset({top:c})}};return i});
KISSY.add("component/extension/position",function(i){function c(){}c.ATTRS={x:{view:1},y:{view:1},xy:{setter:function(c){var k=i.makeArray(c);k.length&&(k[0]&&this.set("x",k[0]),k[1]&&this.set("y",k[1]));return c},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:1},visible:{value:!1}};c.prototype={move:function(c,k){i.isArray(c)&&(k=c[1],c=c[0]);this.set("xy",[c,k]);return this}};return c});
KISSY.add("component/extension/shim-render",function(){function i(){}i.prototype.__createDom=function(){this.get("el").prepend(S.all("<iframe style='position: absolute;border: none;width: expression(this.parentNode.clientWidth);top: 0;opacity: 0;filter: alpha(opacity=0);left: 0;z-index: -1;height: expression(this.parentNode.clientHeight);'/>"))};return i});
