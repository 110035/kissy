/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: May 14 20:12
*/
KISSY.add("component/extension/align",function(c,a,k){function e(b){var l=b.ownerDocument.body,h=a.css(b,"position");if(!("fixed"==h||"absolute"==h))return"html"==b.nodeName.toLowerCase()?null:b.parentNode;for(b=b.parentNode;b&&b!=l;b=b.parentNode)if(h=a.css(b,"position"),"static"!=h)return b;return null}function q(b){var l,h,d={left:0,right:Infinity,top:0,bottom:Infinity},c;h=b.ownerDocument;l=h.body;for(h=h.documentElement;b=e(b);)if((!r.ie||0!=b.clientWidth)&&b!=l&&b!=h&&"visible"!=a.css(b,"overflow"))c=
a.offset(b),c.left+=b.clientLeft,c.top+=b.clientTop,d.top=Math.max(d.top,c.top),d.right=Math.min(d.right,c.left+b.clientWidth),d.bottom=Math.min(d.bottom,c.top+b.clientHeight),d.left=Math.max(d.left,c.left);b=a.scrollLeft();c=a.scrollTop();d.left=Math.max(d.left,b);d.top=Math.max(d.top,c);l=a.viewportWidth();h=a.viewportHeight();d.right=Math.min(d.right,b+l);d.bottom=Math.min(d.bottom,c+h);return 0<=d.top&&0<=d.left&&d.bottom>d.top&&d.right>d.left?d:null}function p(b,c,a,d){var o,i;o=b.left;i=b.top;
c=j(c,a[0]);b=j(b,a[1]);b=[b.left-c.left,b.top-c.top];return{left:o-b[0]+ +d[0],top:i-b[1]+ +d[1]}}function f(b,a,h){var d=[];c.each(b,function(b){d.push(b.replace(a,function(b){return h[b]}))});return d}function m(){}function o(b){var l,h;c.isWindow(b[0])?(l={left:a.scrollLeft(),top:a.scrollTop()},h=a.viewportWidth(),b=a.viewportHeight()):(l=b.offset(),h=b.outerWidth(),b=b.outerHeight());l.width=h;l.height=b;return l}function j(b,c){var a=c.charAt(0),d=c.charAt(1),o=b.width,e=b.height,g,f;g=b.left;
f=b.top;"c"===a?f+=e/2:"b"===a&&(f+=e);"c"===d?g+=o/2:"r"===d&&(g+=o);return{left:g,top:f}}var s=c.Env.host,r=c.UA;m.__getOffsetParent=e;m.__getVisibleRectForElement=q;m.ATTRS={align:{value:{}}};m.prototype={_onSetAlign:function(b){b&&b.points&&this.align(b.node,b.points,b.offset,b.overflow)},align:function(b,a,h,d){var b=k.one(b||s),h=h&&[].concat(h)||[0,0],d=d||{},e=this.get("el"),i=0,g=q(e[0]),j=o(e),m=o(b),b=p(j,m,a,h),n=c.merge(j,b);if(g&&(d.adjustX||d.adjustY)){if(b.left<g.left||b.left+j.width>
g.right)i=1,a=f(a,/[lr]/ig,{l:"r",r:"l"}),h[0]=-h[0];if(b.top<g.top||b.top+j.height>g.bottom)i=1,a=f(a,/[tb]/ig,{t:"b",b:"t"}),h[1]=-h[1];i&&(b=p(j,m,a,h),c.mix(n,b));a={};a.adjustX=d.adjustX&&(b.left<g.left||b.left+j.width>g.right);a.adjustY=d.adjustY&&(b.top<g.top||b.top+j.height>g.bottom);if(a.adjustX||a.adjustY)d=c.clone(b),i={width:j.width,height:j.height},a.adjustX&&d.left<g.left&&(d.left=g.left),a.resizeWidth&&d.left>=g.left&&d.left+i.width>g.right&&(i.width-=d.left+i.width-g.right),a.adjustX&&
d.left+i.width>g.right&&(d.left=Math.max(g.right-i.width,g.left)),a.adjustY&&d.top<g.top&&(d.top=g.top),a.resizeHeight&&d.top>=g.top&&d.top+i.height>g.bottom&&(i.height-=d.top+i.height-g.bottom),a.adjustY&&d.top+i.height>g.bottom&&(d.top=Math.max(g.bottom-i.height,g.top)),n=c.mix(d,i)}n.left!=j.left&&(this.setInternal("x",null),this.get("view").setInternal("x",null),this.set("x",n.left));n.top!=j.top&&(this.setInternal("y",null),this.get("view").setInternal("y",null),this.set("y",n.top));n.width!=
j.width&&e.width(e.width()+n.width-j.width);n.height!=j.height&&e.height(e.height()+n.height-j.height);return this},center:function(b){this.set("align",{node:b,points:["cc","cc"],offset:[0,0]});return this}};return m},{requires:["dom","node"]});
KISSY.add("component/extension/decorate-child",function(c,a){function k(){}c.augment(k,a,{decorateInternal:function(a){var c=this.get("defaultChildCfg").prefixCls;if(a=a.one("."+(c+this.get("decorateChildCls"))))(c=this.findChildConstructorFromNode(c,a))?this.decorateChildrenInternal(c,a):this.decorateChildren(a)}});return k},{requires:["./decorate-children"]});
KISSY.add("component/extension/decorate-children",function(c,a){function k(){}var e=a.Manager;c.augment(k,{decorateInternal:function(a){this.decorateChildren(a)},findChildConstructorFromNode:function(a,c){var f=c[0].className||"";return f?(f=f.replace(RegExp("\\b"+a,"ig"),""),e.getConstructorByXClass(f)):null},decorateChildrenInternal:function(a,e,f){f=c.merge(this.get("defaultChildCfg"),f,{srcNode:e});delete f.xclass;return this.addChild(new a(f))},decorateChildren:function(a){var c=this,f=c.get("defaultChildCfg").prefixCls,
k=c.get("defaultChildCfg").xclass;a.children().each(function(a){var j=c.findChildConstructorFromNode(f,a)||k&&e.getConstructorByXClass(k);c.decorateChildrenInternal(j,a)})}});return k},{requires:["component/base"]});
KISSY.add("component/extension/delegate-children",function(c,a){function k(){}function e(a){if(!this.get("disabled")){var c=this.getOwnerControl(a.target,a);if(c&&!c.get("disabled"))switch(a.type){case f.start:c.handleMouseDown(a);break;case f.end:c.handleMouseUp(a);break;case f.tap:c.performActionInternal(a);break;case "mouseover":c.handleMouseOver(a);break;case "mouseout":c.handleMouseOut(a);break;case "contextmenu":c.handleContextMenu(a);break;case "dblclick":c.handleDblClick(a)}}}var q=c.UA,p=
c.Env.host.document.documentMode||q.ie,f=a.Gesture,m=c.Features.isTouchSupported();c.augment(k,{__bindUI:function(){var a;a=f.start+" "+f.end+" "+f.tap+" touchcancel ";m||(a+="mouseover mouseout contextmenu "+(p&&9>p?"dblclick ":""));this.get("el").on(a,e,this)},getOwnerControl:function(a){for(var c=this.get("children"),e=c.length,f=this.get("el")[0];a&&a!==f;){for(var b=0;b<e;b++)if(c[b].get("el")[0]===a)return c[b];a=a.parentNode}return null}});return k},{requires:["event"]});
KISSY.add("component/extension",function(c,a,k,e,q,p,f,m){k.Render=e;return{Align:a,Position:k,Shim:{Render:q},DelegateChildren:p,DecorateChild:m,DecorateChildren:f}},{requires:"./extension/align,./extension/position,./extension/position-render,./extension/shim-render,./extension/delegate-children,./extension/decorate-children,./extension/decorate-child".split(",")});
KISSY.add("component/extension/position-render",function(){function c(){var a=this.get("renderData");this.get("elStyle")["z-index"]=a.zIndex;this.get("elCls").push(a.prefixCls+"ext-position ")}c.ATTRS={x:{},y:{},zIndex:{sync:0}};c.prototype={_onSetZIndex:function(a){this.get("el").css("z-index",a)},_onSetX:function(a){null!=a&&this.get("el").offset({left:a})},_onSetY:function(a){null!=a&&this.get("el").offset({top:a})}};return c});
KISSY.add("component/extension/position",function(c){function a(){}a.ATTRS={x:{view:1},y:{view:1},xy:{setter:function(a){var e=c.makeArray(a);e.length&&(e[0]&&this.set("x",e[0]),e[1]&&this.set("y",e[1]));return a},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:1},visible:{value:!1}};a.prototype={move:function(a,e){c.isArray(a)&&(e=a[1],a=a[0]);this.set("xy",[a,e]);return this}};return a});
KISSY.add("component/extension/shim-render",function(){function c(){}c.prototype.__createDom=function(){this.get("el").prepend(S.all("<iframe style='position: absolute;border: none;width: expression(this.parentNode.clientWidth);top: 0;opacity: 0;filter: alpha(opacity=0);left: 0;z-index: -1;height: expression(this.parentNode.clientHeight);'/>"))};return c});
