/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: May 13 13:48
*/
KISSY.add("component/extension/align",function(i,c,n){function j(a){var d=a.ownerDocument.body,e=c.css(a,"position");if(!("fixed"==e||"absolute"==e))return"html"==a.nodeName.toLowerCase()?null:a.parentNode;for(a=a.parentNode;a&&a!=d;a=a.parentNode)if(e=c.css(a,"position"),"static"!=e)return a;return null}function o(a){var d,e,b={left:0,right:Infinity,top:0,bottom:Infinity},k;e=a.ownerDocument;d=e.body;for(e=e.documentElement;a=j(a);)if((!t.ie||0!=a.clientWidth)&&a!=d&&a!=e&&"visible"!=c.css(a,"overflow"))k=
c.offset(a),k.left+=a.clientLeft,k.top+=a.clientTop,b.top=Math.max(b.top,k.top),b.right=Math.min(b.right,k.left+a.clientWidth),b.bottom=Math.min(b.bottom,k.top+a.clientHeight),b.left=Math.max(b.left,k.left);a=c.scrollLeft();k=c.scrollTop();b.left=Math.max(b.left,a);b.top=Math.max(b.top,k);d=c.viewportWidth();e=c.viewportHeight();b.right=Math.min(b.right,a+d);b.bottom=Math.min(b.bottom,k+e);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null}function p(a,d,e,b){var k,c;k=a.left;c=a.top;
d=q(d,e[0]);a=q(a,e[1]);a=[a.left-d.left,a.top-d.top];return{left:k-a[0]+ +b[0],top:c-a[1]+ +b[1]}}function r(a,d,e){var b=[];i.each(a,function(a){b.push(a.replace(d,function(a){return e[a]}))});return b}function m(){}function s(a){var d,e;i.isWindow(a[0])?(d={left:c.scrollLeft(),top:c.scrollTop()},e=c.viewportWidth(),a=c.viewportHeight()):(d=a.offset(),e=a.outerWidth(),a=a.outerHeight());d.width=e;d.height=a;return d}function q(a,d){var e=d.charAt(0),b=d.charAt(1),c=a.width,h=a.height,f,g;f=a.left;
g=a.top;"c"===e?g+=h/2:"b"===e&&(g+=h);"c"===b?f+=c/2:"r"===b&&(f+=c);return{left:f,top:g}}var u=i.Env.host,t=i.UA;m.__getOffsetParent=j;m.__getVisibleRectForElement=o;m.ATTRS={align:{value:{}}};m.prototype={_onSetAlign:function(a){a&&a.points&&this.align(a.node,a.points,a.offset,a.overflow)},align:function(a,d,e,b){var a=n.one(a||u),e=e&&[].concat(e)||[0,0],b=b||{},c=this.get("el"),h=0,f=o(c[0]),g=s(c),j=s(a),a=p(g,j,d,e),l=i.merge(g,a);if(f&&(b.adjustX||b.adjustY)){if(a.left<f.left||a.left+g.width>
f.right)h=1,d=r(d,/[lr]/ig,{l:"r",r:"l"}),e[0]=-e[0];if(a.top<f.top||a.top+g.height>f.bottom)h=1,d=r(d,/[tb]/ig,{t:"b",b:"t"}),e[1]=-e[1];h&&(a=p(g,j,d,e),i.mix(l,a));d={};d.adjustX=b.adjustX&&(a.left<f.left||a.left+g.width>f.right);d.adjustY=b.adjustY&&(a.top<f.top||a.top+g.height>f.bottom);if(d.adjustX||d.adjustY)b=i.clone(a),h={width:g.width,height:g.height},d.adjustX&&b.left<f.left&&(b.left=f.left),d.resizeWidth&&b.left>=f.left&&b.left+h.width>f.right&&(h.width-=b.left+h.width-f.right),d.adjustX&&
b.left+h.width>f.right&&(b.left=Math.max(f.right-h.width,f.left)),d.adjustY&&b.top<f.top&&(b.top=f.top),d.resizeHeight&&b.top>=f.top&&b.top+h.height>f.bottom&&(h.height-=b.top+h.height-f.bottom),d.adjustY&&b.top+h.height>f.bottom&&(b.top=Math.max(f.bottom-h.height,f.top)),l=i.mix(b,h)}l.left!=g.left&&(this.setInternal("x",null),this.get("view").setInternal("x",null),this.set("x",l.left));l.top!=g.top&&(this.setInternal("y",null),this.get("view").setInternal("y",null),this.set("y",l.top));l.width!=
g.width&&c.width(c.width()+l.width-g.width);l.height!=g.height&&c.height(c.height()+l.height-g.height);return this},center:function(a){this.set("align",{node:a,points:["cc","cc"],offset:[0,0]});return this}};return m},{requires:["dom","node"]});KISSY.add("component/extension",function(i,c,n,j,o){n.Render=j;return{Align:c,Position:n,Shim:{Render:o}}},{requires:["./extension/align","./extension/position","./extension/position-render","./extension/shim-render"]});
KISSY.add("component/extension/position-render",function(){function i(){this.get("elStyle")["z-index"]=this.get("zIndex");this.get("elCls").push(this.get("prefixCls")+"-ext-position ")}i.ATTRS={x:{},y:{},zIndex:{sync:0}};i.prototype={_onSetZIndex:function(c){this.get("el").css("z-index",c)},_onSetX:function(c){null!=c&&this.get("el").offset({left:c})},_onSetY:function(c){null!=c&&this.get("el").offset({top:c})}};return i});
KISSY.add("component/extension/position",function(i){function c(){}c.ATTRS={x:{view:1},y:{view:1},xy:{setter:function(c){var j=i.makeArray(c);j.length&&(j[0]&&this.set("x",j[0]),j[1]&&this.set("y",j[1]));return c},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{render:1,view:1},visible:{value:!1}};c.prototype={move:function(c,j){i.isArray(c)&&(j=c[1],c=c[0]);this.set("xy",[c,j]);return this}};return c});
KISSY.add("component/extension/shim-render",function(){function i(){}i.prototype.__createDom=function(){this.get("el").prepend(S.all("<iframe style='position: absolute;border: none;width: expression(this.parentNode.clientWidth);top: 0;opacity: 0;filter: alpha(opacity=0);left: 0;z-index: -1;height: expression(this.parentNode.clientHeight);'/>"))};return i});
