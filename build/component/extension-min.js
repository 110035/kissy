/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jun 18 19:55
*/
KISSY.add("component/extension/align",function(c,a){function e(b){var s=b.ownerDocument.body,c=q(b).css("position");if(!("fixed"==c||"absolute"==c))return"html"==b.nodeName.toLowerCase()?null:b.parentNode;for(b=b.parentNode;b&&b!=s;b=b.parentNode)if(c=q(b).css("position"),"static"!=c)return b;return null}function f(b){var c,h,d={left:0,right:Infinity,top:0,bottom:Infinity},a;h=b.ownerDocument;c=h.body;for(h=h.documentElement;b=e(b);)if((!t.ie||0!=b.clientWidth)&&b!=c&&b!=h&&"visible"!=q(b).css("overflow"))a=
q(b).offset(),a.left+=b.clientLeft,a.top+=b.clientTop,d.top=Math.max(d.top,a.top),d.right=Math.min(d.right,a.left+b.clientWidth),d.bottom=Math.min(d.bottom,a.top+b.clientHeight),d.left=Math.max(d.left,a.left);b=l.scrollLeft();a=l.scrollTop();d.left=Math.max(d.left,b);d.top=Math.max(d.top,a);c=l.width();h=l.height();d.right=Math.min(d.right,b+c);d.bottom=Math.min(d.bottom,a+h);return 0<=d.top&&0<=d.left&&d.bottom>d.top&&d.right>d.left?d:null}function n(b,c,h,d){var a,e;a=b.left;e=b.top;c=o(c,h[0]);
b=o(b,h[1]);b=[b.left-c.left,b.top-c.top];return{left:a-b[0]+ +d[0],top:e-b[1]+ +d[1]}}function k(b,h,a){var d=[];c.each(b,function(b){d.push(b.replace(h,function(b){return a[b]}))});return d}function i(){}function h(b){var h,a;c.isWindow(b[0])?(h={left:l.scrollLeft(),top:l.scrollTop()},a=l.width(),b=l.height()):(h=b.offset(),a=b.outerWidth(),b=b.outerHeight());h.width=a;h.height=b;return h}function o(b,h){var c=h.charAt(0),d=h.charAt(1),a=b.width,e=b.height,g,f;g=b.left;f=b.top;"c"===c?f+=e/2:"b"===
c&&(f+=e);"c"===d?g+=a/2:"r"===d&&(g+=a);return{left:g,top:f}}var r=c.Env.host,q=a.all,l=q(r),t=c.UA;i.__getOffsetParent=e;i.__getVisibleRectForElement=f;i.ATTRS={align:{value:{}}};i.prototype={_onSetAlign:function(b){b&&b.points&&this.align(b.node,b.points,b.offset,b.overflow)},align:function(b,e,i,d){var b=a.one(b||r),i=i&&[].concat(i)||[0,0],d=d||{},o=this.get("el"),j=0,g=f(o[0]),m=h(o),l=h(b),b=n(m,l,e,i),p=c.merge(m,b);if(g&&(d.adjustX||d.adjustY)){if(b.left<g.left||b.left+m.width>g.right)j=
1,e=k(e,/[lr]/ig,{l:"r",r:"l"}),i[0]=-i[0];if(b.top<g.top||b.top+m.height>g.bottom)j=1,e=k(e,/[tb]/ig,{t:"b",b:"t"}),i[1]=-i[1];j&&(b=n(m,l,e,i),c.mix(p,b));e={};e.adjustX=d.adjustX&&(b.left<g.left||b.left+m.width>g.right);e.adjustY=d.adjustY&&(b.top<g.top||b.top+m.height>g.bottom);if(e.adjustX||e.adjustY)d=c.clone(b),j={width:m.width,height:m.height},e.adjustX&&d.left<g.left&&(d.left=g.left),e.resizeWidth&&d.left>=g.left&&d.left+j.width>g.right&&(j.width-=d.left+j.width-g.right),e.adjustX&&d.left+
j.width>g.right&&(d.left=Math.max(g.right-j.width,g.left)),e.adjustY&&d.top<g.top&&(d.top=g.top),e.resizeHeight&&d.top>=g.top&&d.top+j.height>g.bottom&&(j.height-=d.top+j.height-g.bottom),e.adjustY&&d.top+j.height>g.bottom&&(d.top=Math.max(g.bottom-j.height,g.top)),p=c.mix(d,j)}this.set({x:p.left,y:p.top},{force:1});this.set({width:o.width()+p.width-m.width,height:o.height()+p.height-m.height});return this},center:function(b){this.set("align",{node:b,points:["cc","cc"],offset:[0,0]});return this}};
return i},{requires:["node"]});
KISSY.add("component/extension/content-render",function(c){function a(){c.mix(this.get("childrenElSelectors"),{contentEl:"#ks-content-{id}"})}a.prototype={getChildrenContainerEl:function(){return this.get("contentEl")},_onSetContent:function(a){var f=this.get("contentEl");f.html(a);9>c.UA.ie&&!this.get("allowTextSelection")&&f.unselectable()}};c.mix(a,{ATTRS:{contentTpl:{value:'<div id="ks-content-{{id}}" class="{{getBaseCssClasses "content"}}">{{{content}}}</div>'},content:{sync:0}},HTML_PARSER:{content:function(a){return a.one("."+
this.getBaseCssClass("content")).html()},contentEl:function(a){return a.one("."+this.getBaseCssClass("content"))}}});a.ContentTpl=a.ATTRS.contentTpl.value;return a});
KISSY.add("component/extension/position",function(c){function a(){}a.ATTRS={x:{view:1},y:{view:1},xy:{setter:function(a){var f=c.makeArray(a);f.length&&(f[0]&&this.set("x",f[0]),f[1]&&this.set("y",f[1]));return a},getter:function(){return[this.get("x"),this.get("y")]}},zIndex:{view:1},visible:{value:!1}};a.prototype={move:function(a,f){c.isArray(a)&&(f=a[1],a=a[0]);this.set("xy",[a,f]);return this}};return a});
KISSY.add("component/extension/position-render",function(){function c(){var a=this.get("renderData");this.get("elStyle")["z-index"]=a.zIndex}c.ATTRS={x:{},y:{},zIndex:{sync:0}};c.prototype={_onSetZIndex:function(a){this.get("el").css("z-index",a)},_onSetX:function(a){this.get("el").offset({left:a})},_onSetY:function(a){this.get("el").offset({top:a})}};return c});
KISSY.add("component/extension/shim-render",function(){function c(){}c.prototype.__createDom=function(){this.get("el").prepend(S.all("<iframe style='position: absolute;border: none;width: expression(this.parentNode.clientWidth);top: 0;opacity: 0;filter: alpha(opacity=0);left: 0;z-index: -1;height: expression(this.parentNode.clientHeight);'/>"))};return c});
KISSY.add("component/extension/delegate-children",function(c,a){function e(){this.__childrenIdMap={};this.__childClsTag=c.guid("ks-component-child");this.on("afterRenderChild",this._processRenderChildForDelegate,this).on("afterRemoveChild",this._processRemoveChildForDelegate,this)}var f=c.UA,n=c.Env.host.document.documentMode||f.ie,k=a.Gesture,i=c.Features.isTouchEventSupported();c.augment(e,{handleChildrenEvents:function(a){if(!this.get("disabled")){var c=this.getOwnerControl(a);if(c&&!c.get("disabled"))switch(a.type){case k.start:c.handleMouseDown(a);
break;case k.end:c.handleMouseUp(a);break;case k.tap:c.performActionInternal(a);break;case "mouseenter":c.handleMouseEnter(a);break;case "mouseleave":c.handleMouseLeave(a);break;case "contextmenu":c.handleContextMenu(a);break;case "dblclick":c.handleDblClick(a)}}},_processRenderChildForDelegate:function(a){a.target==this&&(a=a.component,a.get("el").addClass(this.__childClsTag),this.__childrenIdMap[a.get("id")]=a)},_processRemoveChildForDelegate:function(a){a.target==this&&delete this.__childrenIdMap[a.component.get("id")]},
__bindUI:function(){var a=k.start+" "+k.end+" "+k.tap;k.cancel&&(a+=" "+k.cancel);i||(a+=" mouseenter mouseleave contextmenu "+(n&&9>n?"dblclick ":""));this.get("el").delegate(a,"."+this.__childClsTag,this.handleChildrenEvents,this)},getOwnerControl:function(a){return this.__childrenIdMap[a.currentTarget.id]}});return e},{requires:["node"]});
KISSY.add("component/extension/decorate-children",function(c,a){function e(){}var f=a.Manager;c.augment(e,{decorateInternal:function(a){this.decorateChildren(a)},findChildConstructorFromNode:function(a,c){var e=c[0].className||"";return e?(e=e.replace(RegExp("\\b"+a,"ig"),""),f.getConstructorByXClass(e)):null},decorateChildrenInternal:function(a,e,f){f=c.merge(this.get("defaultChildCfg"),f,{srcNode:e});delete f.xclass;return this.addChild(new a(f))},decorateChildren:function(a){var c=this,e=c.get("defaultChildCfg").prefixCls,
h=c.get("defaultChildCfg").xclass;a.children().each(function(a){var n=c.findChildConstructorFromNode(e,a)||h&&f.getConstructorByXClass(h);n&&c.decorateChildrenInternal(n,a)})}});return e},{requires:["component/base"]});
KISSY.add("component/extension/decorate-child",function(c,a){function e(){}c.augment(e,a,{decorateInternal:function(a){var c=this.get("defaultChildCfg").prefixCls;if(a=a.one("."+this.get("decorateChildCls")))(c=this.findChildConstructorFromNode(c,a))?this.decorateChildrenInternal(c,a):this.decorateChildren(a)}});e.ATTRS={decorateChildCls:{valueFn:function(){return this.getBaseCssClass("content")}}};return e},{requires:["./decorate-children"]});
KISSY.add("component/extension",function(c,a,e,f,n,k,i,h,o){return{Align:a,Position:f,PositionRender:n,ContentRender:e,ShimRender:6===c.UA?k:null,DelegateChildren:i,DecorateChild:o,DecorateChildren:h}},{requires:"./extension/align,./extension/content-render,./extension/position,./extension/position-render,./extension/shim-render,./extension/delegate-children,./extension/decorate-children,./extension/decorate-child".split(",")});
