/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jul 16 19:55
*/
KISSY.add("event/dom/base/utils",function(f,d){var a="ksEventTargetId_"+f.now(),b=f.Env.host.document;return{simpleAdd:b&&b.addEventListener?function(a,b,d,f){a.addEventListener&&a.addEventListener(b,d,!!f)}:function(a,b,d){a.attachEvent&&a.attachEvent("on"+b,d)},simpleRemove:b&&b.removeEventListener?function(a,b,d,f){a.removeEventListener&&a.removeEventListener(b,d,!!f)}:function(a,b,d){a.detachEvent&&a.detachEvent("on"+b,d)},data:function(b,f){return d.data(b,a,f)},removeData:function(b){return d.removeData(b,
a)}}},{requires:["dom"]});KISSY.add("event/dom/base/special",function(){return{}});
KISSY.add("event/dom/base/observer",function(f,d,a){function b(a){b.superclass.constructor.apply(this,arguments)}f.extend(b,a.Observer,{keys:"fn,filter,data,context,originalType,groups,last".split(","),notifyInternal:function(a,b){var f,j,q=a.type,m;(m=this.originalType)?a.type=m:m=q;(f=d[m])&&f.handle?(f=f.handle(a,this,b))&&0<f.length&&(j=f[0]):j=this.simpleNotify(a,b);a.type=q;return j}});return b},{requires:["./special","event/base"]});
KISSY.add("event/dom/base/object",function(f,d,a){function b(){return j}function p(){return q}function l(c){var k=c.type;l.superclass.constructor.call(this);this.originalEvent=c;this.isDefaultPrevented=c.defaultPrevented||c.returnValue===q||c.getPreventDefault&&c.getPreventDefault()?b:p;var h=null,g,n,i=m.concat();f.each(o,function(c){return k.match(c.reg)?(i=i.concat(c.props),h=c.fix,!1):a});for(g=i.length;g;)n=i[--g],this[n]=c[n];this.target||(this.target=c.srcElement||t);3===this.target.nodeType&&
(this.target=this.target.parentNode);h&&h(this,c)}var t=f.Env.host.document,j=!0,q=!1,m="altKey,bubbles,cancelable,ctrlKey,currentTarget,eventPhase,metaKey,shiftKey,target,timeStamp,view,type".split(","),o=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(c,k){null==c.which&&(c.which=null!=k.charCode?k.charCode:k.keyCode);c.metaKey===a&&(c.metaKey=c.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},
{reg:/^mousewheel$/,props:[],fix:function(c,k){var h,g,m,i=k.wheelDelta,b=k.axis,o=k.wheelDeltaY,f=k.wheelDeltaX,d=k.detail;i&&(m=i/120);d&&(m=-(0==d%3?d/3:d));b!==a&&(b===e.HORIZONTAL_AXIS?(g=0,h=-1*m):b===e.VERTICAL_AXIS&&(h=0,g=m));o!==a&&(g=o/120);f!==a&&(h=-1*f/120);!h&&!g&&(g=m);h!==a&&(c.deltaX=h);g!==a&&(c.deltaY=g);m!==a&&(c.delta=m)}},{reg:/^mouse|contextmenu|click|mspointer/i,props:"buttons,clientX,clientY,button,offsetX,relatedTarget,which,fromElement,toElement,offsetY,pageX,pageY,screenX,screenY".split(","),
fix:function(c,m){var h,g,b=c.target,i=m.button;null==c.pageX&&null!=m.clientX&&(h=b.ownerDocument||t,g=h.documentElement,h=h.body,c.pageX=m.clientX+(g&&g.scrollLeft||h&&h.scrollLeft||0)-(g&&g.clientLeft||h&&h.clientLeft||0),c.pageY=m.clientY+(g&&g.scrollTop||h&&h.scrollTop||0)-(g&&g.clientTop||h&&h.clientTop||0));!c.which&&i!==a&&(c.which=i&1?1:i&2?3:i&4?2:0);!c.relatedTarget&&c.fromElement&&(c.relatedTarget=c.fromElement===b?c.toElement:c.fromElement);return c}}];f.extend(l,d.Object,{constructor:l,
preventDefault:function(){var a=this.originalEvent;a.preventDefault?a.preventDefault():a.returnValue=q;l.superclass.preventDefault.call(this)},stopPropagation:function(){var a=this.originalEvent;a.stopPropagation?a.stopPropagation():a.cancelBubble=j;l.superclass.stopPropagation.call(this)}});return l},{requires:["event/base"]});
KISSY.add("event/dom/base/observable",function(f,d,a,b,p,l,t){function j(a){f.mix(this,a);this.reset()}var q=t.Utils;f.extend(j,t.Observable,{setup:function(){var m=this.type,o=a[m]||{},c=this.currentTarget,k=b.data(c).handle;(!o.setup||!1===o.setup.call(c,m))&&b.simpleAdd(c,m,k)},constructor:j,reset:function(){j.superclass.reset.call(this);this.lastCount=this.delegateCount=0},notify:function(a){var b=a.target,c=a.type,k=this.currentTarget,h=this.observers,g=[],n,i,f=this.delegateCount||0,s,v;if(f&&
b.nodeType)for(;b!=k;){if(!0!==b.disabled||"click"!==c){var r={},l,j,p;s=[];for(i=0;i<f;i++)v=h[i],p=v.filter,j=p+"",l=r[j],void 0===l&&(l=r[j]=d.test(b,p)),l&&s.push(v);s.length&&g.push({currentTarget:b,currentTargetObservers:s})}b=b.parentNode||k}f<h.length&&g.push({currentTarget:k,currentTargetObservers:h.slice(f)});i=0;for(b=g.length;!a.isPropagationStopped()&&i<b;++i){c=g[i];s=c.currentTargetObservers;c=c.currentTarget;a.currentTarget=c;for(c=0;!a.isImmediatePropagationStopped()&&c<s.length;c++)k=
s[c],k=k.notify(a,this),!1!==n&&(n=k)}return n},fire:function(b,o){var b=b||{},c=""+this.type,k,h,g=a[c]||{};k=!1!==g.bubbles;var n=this.currentTarget;if(!(g.fire&&!1===g.fire.call(n,o))&&(b instanceof l||(h=b,b=new l({currentTarget:n,type:c,target:n}),f.mix(b,h)),!(g.preFire&&!1===g.preFire.call(n,b,o)))){var i=n,u=d.getWindow(i),s=u.document;h=[];g=0;do h.push(i),i=i.parentNode||i.ownerDocument||i===s&&u;while(!o&&i&&k);i=h[g];do b.currentTarget=i,(k=j.getDomEventObservable(i,c))&&k.notify(b),i=
h[++g];while(!o&&i&&!b.isPropagationStopped());if(!o&&!b.isDefaultPrevented()){try{n[c]&&!f.isWindow(n)&&(j.triggeredEvent=c,n[c]())}catch(v){}j.triggeredEvent=""}}},on:function(b){var f=this.observers,c=a[this.type]||{},b=b instanceof p?b:new p(b);-1==this.findObserver(b)&&(b.filter?(f.splice(this.delegateCount,0,b),this.delegateCount++):b.last?(f.push(b),this.lastCount++):f.splice(f.length-this.lastCount,0,b),c.add&&c.add.call(this.currentTarget,b))},detach:function(b){var f,c=a[this.type]||{},
k="filter"in b,h=b.filter,g=b.context,n=b.fn,i=this.currentTarget,d=this.observers,b=b.groups;if(d.length){b&&(f=q.getGroupsRe(b));var s,l,r,j,p=d.length;if(n||k||f){g=g||i;s=b=0;for(l=[];b<p;++b)r=d[b],j=r.context||i,g!=j||n&&n!=r.fn||k&&(h&&h!=r.filter||!h&&!r.filter)||f&&!r.groups.match(f)?l[s++]=r:(r.filter&&this.delegateCount&&this.delegateCount--,r.last&&this.lastCount&&this.lastCount--,c.remove&&c.remove.call(i,r));this.observers=l}else this.reset();this.checkMemory()}},checkMemory:function(){var d=
this.type,l,c,k=a[d]||{},h=this.currentTarget,g=b.data(h);if(g&&(l=g.observables,this.hasObserver()||(c=g.handle,(!k.tearDown||!1===k.tearDown.call(h,d))&&b.simpleRemove(h,d,c),delete l[d]),f.isEmptyObject(l)))g.handle=null,b.removeData(h)}});j.triggeredEvent="";j.getDomEventObservable=function(a,f){var c=b.data(a),k;c&&(k=c.observables);return k?k[f]:null};j.getDomEventObservablesHolder=function(a,f){var c=b.data(a);!c&&f&&b.data(a,c={});return c};return j},{requires:"dom,./special,./utils,./observer,./object,event/base".split(",")});
KISSY.add("event/dom/base/dom-event",function(f,d,a,b,p,l,t){function j(a,b){var c=p[b]||{},f;if(!a.originalType&&(f=c.typeFix))a.originalType=b,b=f;return b}function q(a,b,c){var d,i,u,c=f.merge(c),b=j(c,b);d=l.getDomEventObservablesHolder(a,1);if(!(u=d.handle))u=d.handle=function(a){var b=a.type,c=u.currentTarget;if(!(l.triggeredEvent==b||"undefined"==typeof KISSY))if(b=l.getDomEventObservable(c,b))return a.currentTarget=c,a=new t(a),b.notify(a)},u.currentTarget=a;if(!(i=d.observables))i=d.observables=
{};d=i[b];d||(d=i[b]=new l({type:b,currentTarget:a}),d.setup());d.on(c);a=null}function m(a,b,c){var c=f.merge(c),b=j(c,b),a=l.getDomEventObservablesHolder(a),d=(a||{}).observables;if(a&&d)if(b)(b=d[b])&&b.detach(c);else for(b in d)d[b].detach(c)}var o=d.Utils,c={};f.mix(c,{on:function(a,c,g,d){a=b.query(a);o.batchForType(function(a,b,c,d){for(var c=o.normalizeParam(b,c,d),g,b=c.type,d=a.length-1;0<=d;d--)g=a[d],q(g,b,c)},1,a,c,g,d);return a},detach:function(a,c,d,f){a=b.query(a);o.batchForType(function(a,
b,c,d){for(var c=o.normalizeParam(b,c,d),g,f,b=c.type,d=a.length-1;0<=d;d--)if(g=a[d],m(g,b,c),c.deep&&g.getElementsByTagName){f=g.getElementsByTagName("*");for(g=f.length-1;0<=g;g--)m(f[g],b,c)}},1,a,c,d,f);return a},delegate:function(a,b,d,f,i){return c.on(a,b,{fn:f,context:i,filter:d})},undelegate:function(a,b,d,f,i){return c.detach(a,b,{fn:f,context:i,filter:d})},fire:function(a,c,d,f){var i=void 0,d=d||{};d.synthetic=1;o.splitAndRun(c,function(c){var h,j,m;o.fillGroupsForEvent(c,d);c=d.type;
if((j=p[c])&&j.typeFix)c=j.typeFix;a=b.query(a);for(j=a.length-1;0<=j;j--)h=a[j],m=l.getDomEventObservable(h,c),!f&&!m&&(m=new l({type:c,currentTarget:h})),m&&(h=m.fire(d,f),!1!==i&&(i=h))});return i},fireHandler:function(a,b,d){return c.fire(a,b,d,1)},clone:function(b,c){var d;if(d=l.getDomEventObservablesHolder(b)){var j=a.data(b);j&&j===a.data(c)&&a.removeData(c);f.each(d.observables,function(a,b){f.each(a.observers,function(a){q(c,b,a)})})}}});return c},{requires:"event/base,./utils,dom,./special,./observable,./object".split(",")});
KISSY.add("event/dom/base/key-codes",function(f){var d=f.UA,a={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,
Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,
WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(b){if(b.altKey&&!b.ctrlKey||b.metaKey||b.keyCode>=a.F1&&b.keyCode<=a.F12)return!1;switch(b.keyCode){case a.ALT:case a.CAPS_LOCK:case a.CONTEXT_MENU:case a.CTRL:case a.DOWN:case a.END:case a.ESC:case a.HOME:case a.INSERT:case a.LEFT:case a.MAC_FF_META:case a.META:case a.NUMLOCK:case a.NUM_CENTER:case a.PAGE_DOWN:case a.PAGE_UP:case a.PAUSE:case a.PRINT_SCREEN:case a.RIGHT:case a.SHIFT:case a.UP:case a.WIN_KEY:case a.WIN_KEY_RIGHT:return!1;
default:return!0}},isCharacterKey:function(b){if(b>=a.ZERO&&b<=a.NINE||b>=a.NUM_ZERO&&b<=a.NUM_MULTIPLY||b>=a.A&&b<=a.Z||d.webkit&&0==b)return!0;switch(b){case a.SPACE:case a.QUESTION_MARK:case a.NUM_PLUS:case a.NUM_MINUS:case a.NUM_PERIOD:case a.NUM_DIVISION:case a.SEMICOLON:case a.DASH:case a.EQUALS:case a.COMMA:case a.PERIOD:case a.SLASH:case a.APOSTROPHE:case a.SINGLE_QUOTE:case a.OPEN_SQUARE_BRACKET:case a.BACKSLASH:case a.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}};return a});
KISSY.add("event/dom/base/gesture",function(){return{start:"mousedown",move:"mousemove",end:"mouseup",tap:"click",doubleTap:"dblclick"}});
KISSY.add("event/dom/base/special-events",function(f,d,a){var b=b;return f.mix(a,{mousewheel:{typeFix:f.UA.gecko?"DOMMouseScroll":"mousewheel"},load:{bubbles:!1},click:{fire:function(a){return!a&&"checkbox"===""+this.type&&this.click&&"input"==this.nodeName.toLowerCase()?(this.click(),!1):b}},focus:{bubbles:!1,preFire:function(a,b){b||d.fire(this,"focusin")},fire:function(a){return!a&&this.ownerDocument&&this!==this.ownerDocument.activeElement&&this.focus?(this.focus(),!1):b}},blur:{bubbles:!1,preFire:function(a,
b){b||d.fire(this,"focusout")},fire:function(a){return!a&&this.ownerDocument&&this===this.ownerDocument.activeElement&&this.blur?(this.blur(),!1):b}}})},{requires:["./dom-event","./special"]});
KISSY.add("event/dom/base/mouseenter",function(f,d,a){f.each([{name:"mouseenter",fix:"mouseover"},{name:"mouseleave",fix:"mouseout"}],function(b){a[b.name]={typeFix:b.fix,handle:function(a,b,f){var j=a.currentTarget,q=a.relatedTarget;if(!q||q!==j&&!d.contains(j,q))return[b.simpleNotify(a,f)]}}})},{requires:["dom","./special"]});
KISSY.add("event/dom/base/valuechange",function(f,d,a,b){function p(b){if(a.hasData(b,g)){var c=a.data(b,g);clearTimeout(c);a.removeData(b,g)}}function l(a){p(a.target)}function t(b){var f=b.value,g=a.data(b,h);f!==g&&(d.fireHandler(b,c,{prevVal:g,newVal:f}),a.data(b,h,f))}function j(b){a.hasData(b,g)||a.data(b,g,setTimeout(function(){t(b);a.data(b,g,setTimeout(arguments.callee,n))},n))}function q(b){var c=b.target;"focus"==b.type&&a.data(c,h,c.value);j(c)}function m(a){t(a.target)}function o(b){a.removeData(b,
h);p(b);d.detach(b,"blur",l);d.detach(b,"webkitspeechchange",m);d.detach(b,"mousedown keyup keydown focus",q)}var c="valuechange",k=a.nodeName,h="event/valuechange/history",g="event/valuechange/poll",n=50;b[c]={setup:function(){var a=k(this);if("input"==a||"textarea"==a)o(this),d.on(this,"blur",l),d.on(this,"webkitspeechchange",m),d.on(this,"mousedown keyup keydown focus",q)},tearDown:function(){o(this)}};return d},{requires:["./dom-event","dom","./special"]});
KISSY.add("event/dom/base",function(f,d,a,b,p,l){return f.merge({add:d.on,remove:d.detach,KeyCode:b,Gesture:p,Special:l,Object:a},d)},{requires:"./base/dom-event,./base/object,./base/key-codes,./base/gesture,./base/special-events,./base/mouseenter,./base/valuechange".split(",")});
