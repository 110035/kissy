/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jun 27 19:34
*/
KISSY.add("xtemplate/runtime/commands",function(e){var g;return g={each:function(c,a){var b=a.params[0],d="",f;if(b){var i=[0,0].concat(c);if(e.isArray(b)){f=b.length;for(var j=0;j<f;j++)i[0]=b[j],i[1]={xcount:f,xindex:j},d+=a.fn(i)}else for(f in b)i[0]=b[f],i[1]={xkey:f},d+=a.fn(i)}else a.inverse&&(d=a.inverse(c));return d},"with":function(c,a){var b=a.params[0],d=[0].concat(c),f="";b?(d[0]=b,f=a.fn(d)):a.inverse&&(f=a.inverse(c));return f},"if":function(c,a){var b="";a.params[0]?a.fn&&(b=a.fn(c)):
a.inverse&&(b=a.inverse(c));return b},set:function(c,a){for(var b=c.length-1;0<=b;b--)if("object"==typeof c[b]){e.mix(c[b],a.hash);break}return""},include:function(c,a){var b=a.params,c=(a.hash?[a.hash]:[]).concat(c);if(!b||1!=b.length)return e[a.silent?"log":"error"]("include must has one param"),"";var b=b[0],d;if(!(d=a.subTpls[b]))return e[a.silent?"log":"error"]('does not include sub template "'+b+'"'),"";a=e.merge(a);a.name=b;return this.invokeEngine(d,c,a)},parse:function(c,a){return g.include.call(this,
[],a)}}});
KISSY.add("xtemplate/runtime",function(e,g){function c(f,a){this.tpl=f;a=e.merge(d,a);a.subTpls=e.merge(a.subTpls,c.subTpls);a.commands=e.merge(a.commands,c.commands);a.engine=this;a.utils=b;this.config=a}var a={},b={getProperty:function(a,b,c){if("this"==a||"."==a)return b.length?[b[0]]:!1;for(var a=a.split("."),d=a.length,e=c||0,h,g,k,l=b.length;e<l;e++){h=b[e];k=1;for(c=0;c<d;c++){g=a[c];if("object"!=typeof h||!(g in h)){k=0;break}h=h[g]}if(k)return"function"==typeof h&&(h=h.call(b[l-1])),[h]}return!1}},
d={silent:!0,name:"unspecified",escapeHtml:!0};c.prototype={constructor:c,invokeEngine:function(a,b,c){return(new this.constructor(a,c)).render(b,!0)},removeSubTpl:function(a){delete this.config.subTpls[a]},removeCommand:function(a){delete this.config.commands[a]},addSubTpl:function(a,b){this.config.subTpls[a]=b},addCommand:function(a,b){this.config.commands[a]=b},render:function(a,b){b||(a=[a]);return this.tpl(a,this.config)}};e.mix(c,{commands:g,subTpls:a,utils:b,addCommand:function(a,b){g[a]=b},
removeCommand:function(a){delete g[a]},addSubTpl:function(b,c){a[b]=c},removeSubTpl:function(b){delete a[b]}});return c},{requires:["./runtime/commands"]});
