/*
Copyright 2013, KISSY UI Library v1.40dev
MIT Licensed
build time: Jun 24 21:51
*/
KISSY.add("xtemplate/runtime/commands",function(g){return{each:function(d,a){var b=a.params[0],e="",c;if(b){var f=[0,0].concat(d);if(g.isArray(b)){c=b.length;for(var h=0;h<c;h++)f[0]=b[h],f[1]={xcount:c,xindex:h},e+=a.fn(f)}else for(c in b)f[0]=b[c],f[1]={xkey:c},e+=a.fn(f)}else a.inverse&&(e=a.inverse(d));return e},"with":function(d,a){var b=a.params[0],e=[0].concat(d),c="";b?(e[0]=b,c=a.fn(e)):a.inverse&&(c=a.inverse(d));return c},"if":function(d,a){var b="";a.params[0]?a.fn&&(b=a.fn(d)):a.inverse&&
(b=a.inverse(d));return b},set:function(d,a){for(var b=d.length-1;0<=b;b--)if("object"==typeof d[b]){g.mix(d[b],a.hash);break}return""},include:function(d,a){var b=a.params;if(!b||1!=b.length)return g[a.silent?"log":"error"]("include must has one param"),"";var b=b[0],e;if(!(e=a.subTpls[b]))return g[a.silent?"log":"error"]('does not include sub template "'+b+'"'),"";a=g.merge(a);a.name=b;return this.invokeEngine(e,d,a)}}});
KISSY.add("xtemplate/runtime",function(g,d){function a(f,h){this.tpl=f;h=g.merge(c,h);h.subTpls=g.merge(h.subTpls,a.subTpls);h.commands=g.merge(h.commands,a.commands);h.instance=this;h.utils=e;this.config=h}var b={},e={getProperty:function(f,a,b){if("this"==f||"."==f)return a.length?[a[0]]:!1;for(var f=f.split("."),d=f.length,e=b||0,c,g,i,j=a.length;e<j;e++){c=a[e];i=1;for(b=0;b<d;b++){g=f[b];if("object"!=typeof c||!(g in c)){i=0;break}c=c[g]}if(i)return"function"==typeof c&&(c=c.call(a[j-1])),[c]}return!1}},
c={silent:!0,name:"unspecified",escapeHtml:!0};a.prototype={constructor:a,invokeEngine:function(a,b,c){return(new this.constructor(a,c)).render(b,!0)},removeSubTpl:function(a){delete this.config.subTpls[a]},removeCommand:function(a){delete this.config.commands[a]},addSubTpl:function(a,b){this.config.subTpls[a]=b},addCommand:function(a,b){this.config.commands[a]=b},render:function(a,b){b||(a=[a]);return this.tpl(a,this.config)}};g.mix(a,{commands:d,subTpls:b,utils:e,addCommand:function(a,b){d[a]=b},
removeCommand:function(a){delete d[a]},addSubTpl:function(a,c){b[a]=c},removeSubTpl:function(a){delete b[a]}});return a},{requires:["./runtime/commands"]});
